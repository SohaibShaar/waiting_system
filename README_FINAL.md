# 🏥 نظام إدارة الأدوار - Queue Management System

## 🎯 نظام متكامل للفحص الطبي قبل الزواج

نظام شامل مع واجهات أمامية كاملة لإدارة أدوار المرضى من الاستقبال حتى الفحص النهائي.

---

## ✨ الميزات الرئيسية

### 🔄 الاستدعاء التلقائي
- **الاستقبال:** إنشاء مريض ودور جديد تلقائياً
- **المحاسبة:** حفظ → استدعاء التالي تلقائياً
- **المختبر:** حفظ → استدعاء التالي تلقائياً
- **الطبيب:** حفظ → إنهاء الدور تلقائياً

### 📺 الشاشة العامة
- عرض مباشر للاستدعاءات
- تحديثات فورية عبر WebSocket
- تصميم جذاب وواضح

### 🖥️ واجهات كاملة
- **الاستقبال:** إدخال بيانات المرضى
- **المحاسبة:** تسجيل المدفوعات
- **المختبر:** الفحوصات الأولية
- **الطبيبة:** الفحص النهائي

---

## 🚀 البدء السريع

### المتطلبات
- Node.js v18+
- MySQL
- npm أو yarn

### التثبيت والتشغيل

#### 1. الخادم (Backend)
```bash
npm install
npx prisma migrate dev
npm run dev
```
الخادم: `http://localhost:3001`

#### 2. الواجهة (Frontend)
```bash
cd web
npm install
npm run dev
```
الواجهة: `http://localhost:5173`

#### 3. الوصول للنظام
افتح: `http://localhost:5173`

---

## 📋 سير العمل

```
1. 📝 الاستقبال
   └─> إدخال بيانات الزوجين
   └─> إنشاء مريض ودور تلقائياً
   └─> 📺 ظهور على الشاشة

2. 💰 المحاسبة
   └─> استدعاء التالي
   └─> تسجيل الدفع
   └─> حفظ واستدعاء التالي تلقائياً

3. 🔬 المختبر
   └─> استدعاء التالي
   └─> فحص السلامة
   └─> حفظ واستدعاء التالي تلقائياً

4. 👩‍⚕️ الطبيبة
   └─> استدعاء التالي
   └─> الفحص النهائي
   └─> حفظ وإنهاء الدور
```

---

## 🎨 الواجهات

### الصفحة الرئيسية `/`
اختيار المحطة المطلوبة

### الشاشة العامة `/display`
- عرض الاستدعاءات الفورية
- قائمة بآخر 10 استدعاءات

### محطة الاستقبال `/reception`
- نموذج كامل لبيانات الزوجين
- إنشاء تلقائي للمريض والدور

### محطة المحاسبة `/accounting`
- استدعاء المريض التالي
- إدخال المبلغ المدفوع
- حفظ تلقائي واستدعاء التالي

### محطة المختبر `/lab`
- فحص الحالة الصحية
- سليم/غير سليم
- ملاحظات تفصيلية
- استدعاء التالي تلقائياً

### محطة الطبيبة `/doctor`
- فصائل الدم
- فحوصات الأمراض (HIV, HBS, HBC)
- التقرير النهائي
- إنهاء الدور

---

## 🔌 APIs الرئيسية

### الاستقبال
```http
POST /api/reception
```

### المحاسبة
```http
POST /api/accounting
```

### المختبر
```http
POST /api/lab
```

### الطبيب
```http
POST /api/doctor
```

### المحطات
```http
POST /api/stations/:id/call-next
POST /api/stations/:id/complete-service
```

---

## 🛠️ التقنيات

### Backend
- Node.js + Express
- TypeScript
- Prisma ORM
- MySQL
- Socket.IO

### Frontend
- React 18
- TypeScript
- Tailwind CSS
- React Router
- Axios
- Socket.IO Client

---

## 📊 قاعدة البيانات

### الجداول
- `Patient` - المرضى
- `Queue` - الأدوار
- `QueueHistory` - السجل
- `Station` - المحطات
- `ReceptionData` - بيانات الاستقبال
- `AccountingData` - بيانات المحاسبة
- `LabData` - بيانات المختبر
- `DoctorData` - بيانات الطبيب
- `CompletedVisit` - الأرشيف

---

## 📚 التوثيق الكامل

- **`COMPLETE_SYSTEM_GUIDE.md`** - الدليل الشامل
- **`FRONTEND_GUIDE.md`** - دليل الواجهات
- **`RECEPTION_AS_START_POINT.md`** - نظام الاستقبال
- **`API_USAGE_GUIDE.md`** - دليل APIs
- **`API_EXAMPLES_UPDATED.http`** - أمثلة عملية

---

## 🎯 الميزات الفريدة

### ✅ إنشاء تلقائي
الاستقبال ينشئ مريض ودور جديد تلقائياً بخطوة واحدة

### ✅ استدعاء ذكي
كل محطة تستدعي المريض التالي تلقائياً بعد الحفظ

### ✅ WebSocket فوري
الشاشة العامة تحدث فوراً عند أي استدعاء

### ✅ تصميم بسيط
واجهات واضحة باستخدام Tailwind CSS

### ✅ TypeScript
أمان كامل في الأنواع

---

## 📱 متجاوب بالكامل

جميع الواجهات تعمل على:
- 💻 الكمبيوتر
- 📱 الأجهزة اللوحية
- 📱 الهواتف

---

## 🔧 التخصيص

### تغيير معرفات المحطات
```typescript
// في كل صفحة
const STATION_ID = 2; // عدّل الرقم
```

### تغيير الألوان
```javascript
// في tailwind.config.js
theme: {
  extend: {
    colors: { /* ألوانك */ }
  }
}
```

---

## 🐛 استكشاف الأخطاء

### الخادم لا يعمل
```bash
npm run dev
```

### الواجهة لا تتصل
```typescript
const API_URL = 'http://localhost:3001/api';
```

### WebSocket لا يعمل
تحقق من تشغيل الخادم

---

## 📈 الإحصائيات

```http
GET /api/stats/today
GET /api/stats/stations
GET /api/stats/custom
```

---

## 🎉 جاهز للاستخدام

النظام مكتمل ويتضمن:
- ✅ 5 واجهات كاملة
- ✅ APIs شاملة
- ✅ WebSocket للتحديثات
- ✅ تصميم عصري
- ✅ توثيق كامل

---

## 🤝 المساهمة

1. Fork المشروع
2. أنشئ Branch (`git checkout -b feature/Feature`)
3. Commit التغييرات (`git commit -m 'Add Feature'`)
4. Push (`git push origin feature/Feature`)
5. افتح Pull Request

---

## 📄 الرخصة

MIT License

---

## 📞 الدعم

للأسئلة والدعم، راجع:
- `COMPLETE_SYSTEM_GUIDE.md`
- `FRONTEND_GUIDE.md`
- أو افتح Issue على GitHub

---

## 🌟 الإصدار

**الإصدار الحالي:** 2.1.0  
**تاريخ الإصدار:** 2025-10-12  
**الحالة:** ✅ جاهز للإنتاج

---

## 📸 معاينة

### الصفحة الرئيسية
شبكة من 6 بطاقات لاختيار المحطة

### الشاشة العامة
عرض كبير لرقم الدور مع قائمة الاستدعاءات

### المحطات
نماذج واضحة وبسيطة مع أزرار كبيرة

---

**استمتع بالاستخدام! 🚀**

**تم بواسطة:** نظام إدارة الأدوار  
**للفحص الطبي قبل الزواج** 🏥

