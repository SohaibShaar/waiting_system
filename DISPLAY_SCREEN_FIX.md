# ๐ฅ๏ธ ุฅุตูุงุญ ุงูุดุงุดุฉ ุงูุนุงูุฉ (Display Screen)

## ๐ฏ ุงููุดููุฉ
ูุงูุช ุงูุดุงุดุฉ ุงูุนุงูุฉ ุชุนุฑุถ ุจูุงูุงุช ุนุดูุงุฆูุฉ ุฃู ููุฑุฑุฉ ุจุณุจุจ:
1. โ ุฅุฑุณุงู ุฃุญุฏุงุซ WebSocket ููุฑุฑุฉ
2. โ ุนุฏู ุงูุชุญูู ูู ุชูุฑุงุฑ ุงูุงุณุชุฏุนุงุกุงุช
3. โ ุนุฑุถ "ุงูุดุงุดุฉ X" ุจุฏูุงู ูู ุงุณู ุงููุญุทุฉ ุงููุนูู

---

## โ ุงูุญููู ุงููุทุจูุฉ

### 1. ููุน ุงูุชูุฑุงุฑ ูู Frontend

#### ุงูููู: `web/src/pages/DisplayScreen.tsx`

```typescript
newSocket.on("patient-called", (data: CalledPatient) => {
  console.log("๐ข ูุฑูุถ ุฌุฏูุฏ:", data);
  
  // ุชุฌูุจ ุงูุชูุฑุงุฑ - ุชุญูู ูู ุนุฏู ูุฌูุฏ ููุณ ุงูุงุณุชุฏุนุงุก
  setRecentCalls((prev) => {
    const isDuplicate = prev.some(
      (call) =>
        call.queueNumber === data.queueNumber &&
        call.displayNumber === data.displayNumber &&
        Math.abs(new Date(call.calledAt).getTime() - new Date(data.calledAt).getTime()) < 2000
    );
    
    if (isDuplicate) {
      console.log("โ๏ธ ุชุฌุงูู ุงุณุชุฏุนุงุก ููุฑุฑ");
      return prev;
    }
    
    return [data, ...prev].slice(0, 10);
  });
  
  setLatestCall(data);
  setTimeout(() => setLatestCall(null), 8000); // ุฒูุงุฏุฉ ุงูููุช ุฅูู 8 ุซูุงูู
});
```

**ูุงุฐุง ููุนู ูุฐุงุ**
- โ ูุชุญูู ูู ูุฌูุฏ ุงุณุชุฏุนุงุก ุจููุณ ุฑูู ุงูุฏูุฑ ูููุณ ุงููุญุทุฉ
- โ ูุชุญูู ูู ุฃู ุงููุงุฑู ุงูุฒููู ุฃูุซุฑ ูู 2 ุซุงููุฉ
- โ ุฅุฐุง ูุงู ููุฑุฑุ ูุชู ุชุฌุงููู
- โ ุฒูุงุฏุฉ ููุช ุงูุนุฑุถ ุฅูู 8 ุซูุงูู (ูุงู 5 ุซูุงูู)

---

### 2. ุชูููู ุฅุฑุณุงู ุงูุฃุญุฏุงุซ ูู Backend

#### ุงูููู: `src/index.ts`

**ูุจู:**
```typescript
export const emitPatientCalled = (data: any) => {
  io.to("display-screen").emit("patient-called", data);
  io.emit("patient-called", data); // ุฃูุถุงู ูุฌููุน ุงูุนููุงุก โ ุชูุฑุงุฑ
  console.log("๐ก Emitted patient-called to all clients");
};
```

**ุจุนุฏ:**
```typescript
export const emitPatientCalled = (data: any) => {
  // ุฅุฑุณุงู ููุท ูุดุงุดุฉ ุงูุนุฑุถ ูุชุฌูุจ ุงูุชูุฑุงุฑ
  io.to("display-screen").emit("patient-called", data);
  console.log("๐ก Emitted patient-called to display-screen:", {
    queueNumber: data.queueNumber,
    displayNumber: data.displayNumber,
    stationId: data.stationId,
  });
};
```

**ูุงุฐุง ุชุบูุฑุ**
- โ ุฅุฑุณุงู ุงูุญุฏุซ ููุท ูุดุงุดุฉ ุงูุนุฑุถ (ูููุณ ูุฌููุน ุงูุนููุงุก)
- โ ุฅุถุงูุฉ log ููุตู ูุชุชุจุน ุงูุฃุญุฏุงุซ
- โ ุชุฌูุจ ุงูุชูุฑุงุฑ

---

### 3. ุนุฑุถ ุงุณู ุงููุญุทุฉ ุจุฏูุงู ูู "ุงูุดุงุดุฉ X"

#### ุงูููู: `web/src/pages/DisplayScreen.tsx`

```typescript
const getStationName = (displayNumber: number) => {
  const stations: { [key: number]: string } = {
    1: "ุงูุงุณุชูุจุงู",
    2: "ุงููุญุงุณุจุฉ",
    3: "ุงููุฎุชุจุฑ",
    4: "ุงูุทุจูุจุฉ",
  };
  return stations[displayNumber] || `ุงูุดุงุดุฉ ${displayNumber}`;
};
```

**ุงูุชุญุณููุงุช:**
- โ ุจุฏูุงู ูู "ุงูุดุงุดุฉ 2" โ "ุงููุญุงุณุจุฉ"
- โ ุจุฏูุงู ูู "ุงูุดุงุดุฉ 3" โ "ุงููุฎุชุจุฑ"
- โ ุจุฏูุงู ูู "ุงูุดุงุดุฉ 4" โ "ุงูุทุจูุจุฉ"
- โ ุฃูุซุฑ ูุถูุญุงู ูููุณุชุฎุฏููู

---

## ๐ ุงูุนุฑุถ ุงูุฌุฏูุฏ

### ูู ุงูุดุงุดุฉ ุงููุจูุฑุฉ:
```
๐ข ููุฑุฌู ุงูุฏุฎูู
     101
  โ ุงููุญุงุณุจุฉ
```

### ูู ุฌุฏูู ุงูุงุณุชุฏุนุงุกุงุช:
| ุฑูู ุงูุฏูุฑ | ุงููุญุทุฉ      | ุงูููุช       |
|-----------|-------------|-------------|
| 101       | ุงููุญุงุณุจุฉ    | 10:30:25    |
| 100       | ุงููุฎุชุจุฑ     | 10:28:15    |
| 99        | ุงูุทุจูุจุฉ     | 10:25:40    |

---

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1. ุงูุชุญ ุงูุดุงุดุฉ ุงูุนุงูุฉ
```
http://localhost:5173/display
```

### 2. ุงูุชุญ ุตูุญุฉ ูุญุทุฉ (ูุซู ุงููุญุงุณุจุฉ)
```
http://localhost:5173/accounting
```

### 3. ุงุณุชุฏุนู ูุฑูุถ
- ุงุถุบุท ุนูู ุฒุฑ "ุงุณุชุฏุนุงุก ุงูุชุงูู"
- ุฑุงูุจ ุงูุดุงุดุฉ ุงูุนุงูุฉ

### 4. ุชุญูู ูู:
- โ ูุธูุฑ ุฑูู ุงูุฏูุฑ ูุฑุฉ ูุงุญุฏุฉ ููุท
- โ ูุธูุฑ ุงุณู ุงููุญุทุฉ ุจุดูู ุตุญูุญ ("ุงููุญุงุณุจุฉ" ูููุณ "ุงูุดุงุดุฉ 2")
- โ ุงูููุช ุตุญูุญ
- โ ูุง ุชูุฌุฏ ุงุณุชุฏุนุงุกุงุช ููุฑุฑุฉ

---

## ๐ ุงูุชุชุจุน ูุงูุชุดุฎูุต

### ูู Browser Console (ุงูุดุงุดุฉ ุงูุนุงูุฉ):
```
โ ูุชุตู ุจุงูุฎุงุฏู
๐ข ูุฑูุถ ุฌุฏูุฏ: {queueNumber: 101, displayNumber: 2, ...}
```

ุฅุฐุง ุฑุฃูุช:
```
โ๏ธ ุชุฌุงูู ุงุณุชุฏุนุงุก ููุฑุฑ
```
ููุฐุง ูุนูู ุฃู ุงููุธุงู ูุนูู ุจุดูู ุตุญูุญ ููููุน ุงูุชูุฑุงุฑ!

### ูู Backend Terminal:
```
๐ก Emitted patient-called to display-screen: {
  queueNumber: 101,
  displayNumber: 2,
  stationId: 2
}
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ููุช ุงูุนุฑุถ**: ุงูุงุณุชุฏุนุงุก ุงูุฃุฎูุฑ ูุธูุฑ ููุฏุฉ **8 ุซูุงูู** ุนูู ุงูุดุงุดุฉ ุงููุจูุฑุฉ

2. **ุนุฏุฏ ุงูุงุณุชุฏุนุงุกุงุช**: ุงูุฌุฏูู ูุญูุธ ุขุฎุฑ **10 ุงุณุชุฏุนุงุกุงุช** ููุท

3. **ููุน ุงูุชูุฑุงุฑ**: ุฅุฐุง ุชู ุงุณุชุฏุนุงุก ููุณ ุงูุฏูุฑ ูู ููุณ ุงููุญุทุฉ ุฎูุงู **2 ุซุงููุฉ**ุ ูุชู ุชุฌุงูู ุงูุงุณุชุฏุนุงุก ุงูุซุงูู

4. **ุงูุชุฑุชูุจ**: ุงูุงุณุชุฏุนุงุกุงุช ูุฑุชุจุฉ ูู ุงูุฃุญุฏุซ ุฅูู ุงูุฃูุฏู

---

## ๐ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ (ุงุฎุชูุงุฑู)

ุฅุฐุง ุฃุฑุฏุช ูุฒูุฏ ูู ุงูุชุญุณููุงุช:

### 1. ุฅุถุงูุฉ ุตูุช ุนูุฏ ุงูุงุณุชุฏุนุงุก
```typescript
const playSound = () => {
  const audio = new Audio('/notification.mp3');
  audio.play();
};
```

### 2. ุฅุถุงูุฉ ุฃููุงู ูุฎุชููุฉ ููู ูุญุทุฉ
```typescript
const getStationColor = (displayNumber: number) => {
  const colors: { [key: number]: string } = {
    1: "#054239", // ุงูุงุณุชูุจุงู - ุฃุฎุถุฑ
    2: "#b9a779", // ุงููุญุงุณุจุฉ - ุฐูุจู
    3: "#3d3a3b", // ุงููุฎุชุจุฑ - ุฑูุงุฏู
    4: "#e63946", // ุงูุทุจูุจุฉ - ุฃุญูุฑ
  };
  return colors[displayNumber] || "var(--primary)";
};
```

### 3. ุฅุถุงูุฉ ุชุฃุซูุฑุงุช ุญุฑููุฉ
```css
@keyframes slideIn {
  from { transform: translateX(-100%); }
  to { transform: translateX(0); }
}
```

---

## โ ุงูุฎูุงุตุฉ

ุชู ุฅุตูุงุญ ุฌููุน ูุดุงูู ุงูุนุดูุงุฆูุฉ ูุงูุชูุฑุงุฑ ูู ุงูุดุงุดุฉ ุงูุนุงูุฉ:

1. โ **ููุน ุงูุชูุฑุงุฑ** ูู Frontend
2. โ **ุชูููู ุงูุฃุญุฏุงุซ** ูู Backend
3. โ **ุนุฑุถ ุฃุณูุงุก ูุงุถุญุฉ** ูููุญุทุงุช
4. โ **ุชุชุจุน ุฃูุถู** ููุฃุญุฏุงุซ
5. โ **ููุช ุนุฑุถ ุฃุทูู** ููุงุณุชุฏุนุงุก

ุงููุธุงู ุงูุขู ูุนูู ุจุดูู ุงุญุชุฑุงูู ููุธูู! ๐

