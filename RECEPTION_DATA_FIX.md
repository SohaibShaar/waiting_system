# ุฅุตูุงุญ ุฎุทุฃ ุฅูุดุงุก ุจูุงูุงุช ุงูุงุณุชูุจุงู

## ุงููุดููุฉ
ูุงู ุงููุธุงู ูุชุนุฑุถ ูุฎุทุฃ ุนูุฏ ูุญุงููุฉ ุฅูุดุงุก ุจูุงูุงุช ุงุณุชูุจุงู ุฌุฏูุฏุฉ:
```
Invalid 'prisma.receptionData.create()' invocation
```

## ุงูุณุจุจ
1. **ุฅุฑุณุงู ูุตูุต ูุงุฑุบุฉ ุจุฏูุงู ูู `null`**: ูุงูุช ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุชุฑุณู ูุตูุต ูุงุฑุบุฉ `""` ููุญููู ุงูุงุฎุชูุงุฑูุฉ ุนูุฏูุง ูุง ุชููู ูุทููุจุฉ (ูุซู ุญุงูุฉ "ูุง ููุฌุฏ ุฒูุฌ" ุฃู "ุฏุนูุฉ ุดุฑุนูุฉ").
2. **ุนุฏู ุชูุธูู ุงูุจูุงูุงุช**: ูุงู ุงููุชุญูู (controller) ููุฑุฑ ุงููุตูุต ุงููุงุฑุบุฉ ุฅูู ุงูุฎุฏูุฉ ุฏูู ุชูุธูููุง.
3. **ุชูุงุฑูุฎ ุบูุฑ ุตุงูุญุฉ**: ูุงูุช ุญููู ุงูุชุงุฑูุฎ ุชูุฑุณู ููุตูุต ูุงุฑุบุฉ ููุง ูุณุจุจ ุฎุทุฃ ุนูุฏ ุชุญููููุง ุฅูู ูุงุฆู `Date`.

## ุงูุญููู ุงููุทุจูุฉ

### 1. ุชูุธูู ุงูุจูุงูุงุช ูู ุงููุชุญูู (Controller)
๐ `src/controllers/reception.controller.ts`

ุชู ุฅุถุงูุฉ ุฏุงูุชู ุชูุธูู ููุจูุงูุงุช:
- `cleanString()`: ุชุญูู ุงููุตูุต ุงููุงุฑุบุฉ ุฅูู `undefined` ูุชุฒูู ุงููุณุงูุงุช ุงูุฒุงุฆุฏุฉ
- `cleanNumber()`: ุชุชุนุงูู ูุน ุงูุฃุฑูุงู ุจุดูู ุตุญูุญ ูุชุญูู ุงูููู ุงููุงุฑุบุฉ ุฅูู `undefined`

```typescript
const cleanString = (val: any) => (val && val.trim() !== "" ? val.trim() : undefined);
const cleanNumber = (val: any) => (val !== undefined && val !== null && val !== "" ? Number(val) : undefined);
```

### 2. ุชุจุณูุท ุฅูุดุงุก ุงูุจูุงูุงุช ูู ุงูุฎุฏูุฉ (Service)
๐ `src/services/reception.service.ts`

ุจุฏูุงู ูู ุงุณุชุฎุฏุงู spread operator ุงูุดุฑุทูุ ุชู ุชุญุฏูุฏ ุฌููุน ุงูุญููู ุจุดูู ุตุฑูุญ ูุน ุงุณุชุฎุฏุงู `|| null`:

```typescript
const receptionData = await prisma.receptionData.create({
  data: {
    queueId: queue.id,
    patientId: patient.id,
    maleStatus: data.maleStatus,
    femaleStatus: data.femaleStatus,
    maleName: data.maleName || null,
    maleLastName: data.maleLastName || null,
    // ... ุจุงูู ุงูุญููู
  }
});
```

### 3. ูุณุญ ุงูุญููู ุชููุงุฆูุงู ูู ุงููุงุฌูุฉ
๐ `web/src/pages/ReceptionPage.tsx`

ุนูุฏ ุชุบููุฑ ุญุงูุฉ ุงูุฒูุฌ/ุงูุฒูุฌุฉ ุฅูู "ูุง ููุฌุฏ" ุฃู "ุฎุงุฑุฌ ุงููุทุฑ" ุฃู "ุฎุงุฑุฌ ุงููุญุงูุธุฉ"ุ ูุชู ูุณุญ ุฌููุน ุงูุญููู ุงููุชุนููุฉ ุชููุงุฆูุงู:

```typescript
else if (value === "NOT_EXIST" || value === "OUT_OF_COUNTRY" || value === "OUT_OF_PROVINCE") {
  setFormData((prev) => ({
    ...prev,
    [name]: value,
    maleName: "",
    maleLastName: "",
    // ... ูุณุญ ุฌููุน ุงูุจูุงูุงุช
  }));
}
```

## ุงููุชูุฌุฉ
โ ุงูุขู ุงููุธุงู ูุนูู ุจุดูู ุตุญูุญ ูู ุฌููุน ุงูุญุงูุงุช:
- โ ุญุงูุฉ ุนุงุฏูุฉ (ุงูุฒูุฌุงู ููุฌูุฏุงู)
- โ ุฏุนูุฉ ุดุฑุนูุฉ (ุดุฎุต ูุงุญุฏ ููุท)
- โ ูุง ููุฌุฏ ุฒูุฌ/ุฒูุฌุฉ
- โ ุฎุงุฑุฌ ุงููุทุฑ
- โ ุฎุงุฑุฌ ุงููุญุงูุธุฉ

## ุงููููุงุช ุงููุนุฏูุฉ
1. `src/controllers/reception.controller.ts` - ุฅุถุงูุฉ ุชูุธูู ุงูุจูุงูุงุช
2. `src/services/reception.service.ts` - ุชุจุณูุท ุฅูุดุงุก ุงูุจูุงูุงุช
3. `web/src/pages/ReceptionPage.tsx` - ูุณุญ ุงูุญููู ุชููุงุฆูุงู

## ููุงุญุธุงุช
- ูุง ุญุงุฌุฉ ูุฅุฌุฑุงุก migration ุฌุฏูุฏ ูููุงุนุฏุฉ
- ุงูุชุบููุฑุงุช ูุชูุงููุฉ ูุน ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ
- ุชู ุงูุญูุงุธ ุนูู ุฌููุน ุงูุชุญููุงุช ูู ุตุญุฉ ุงูุจูุงูุงุช

