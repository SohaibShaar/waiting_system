# ๐๏ธ ุฏููู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช - Database Setup Guide

## ุงููุดููุฉ ุงูุญุงููุฉ - Current Issue

ุงููุธุงู ูุญุงูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุจูุงูุงุช MySQL ุนูู `localhost:3306` ููู:
- ุฅูุง ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ูุดุบูุฉ
- ุฃู ูู ูุชู ุฅูุดุงุก ููู `.env` ุจุนุฏ
- ุฃู ูุนูููุงุช ุงูุงุชุตุงู ุบูุฑ ุตุญูุญุฉ

The system is trying to connect to a MySQL database at `localhost:3306` but:
- Either the database is not running
- Or the `.env` file hasn't been created yet
- Or the connection details are incorrect

---

## โก ุงูุญู ุงูุณุฑูุน - Quick Solution

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ููู `.env`

ุฃูุดุฆ ููู ุจุงุณู `.env` ูู ุงููุฌูุฏ ุงูุฑุฆูุณู ูููุดุฑูุน ูุงุฎุชุฑ ุฃุญุฏ ุงูุฎูุงุฑุงุช ุงูุชุงููุฉ:

#### ุงูุฎูุงุฑ 1: MySQL (ุฅุฐุง ูุงู ูุฏูู MySQL ูุซุจุช)

```env
DATABASE_URL="mysql://root:@localhost:3306/waiting_system"
PORT=3003
NODE_ENV=development
```

**ููุงุญุธุฉ:** ุฅุฐุง ูุงู ูุฏูู ูููุฉ ูุฑูุฑ ูู MySQL:
```env
DATABASE_URL="mysql://root:YOUR_PASSWORD@localhost:3306/waiting_system"
```

#### ุงูุฎูุงุฑ 2: SQLite (ุงูุฃุณูู - ูุง ูุญุชุงุฌ ุชุซุจูุช)

ุบููุฑ ูู ููู `prisma/schema.prisma`:

```prisma
datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}
```

ุซู ุฃูุดุฆ ููู `.env`:
```env
DATABASE_URL="file:./dev.db"
PORT=3003
NODE_ENV=development
```

---

### ุงูุฎุทูุฉ 2: ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุฅุฐุง ุงุฎุชุฑุช MySQL:

1. **ุชุดุบูู MySQL:**
   - ุฅุฐุง ููุช ุชุณุชุฎุฏู XAMPP: ุดุบูู Apache ู MySQL ูู ููุญุฉ ุชุญูู XAMPP
   - ุฃู ุดุบูู MySQL ูู services ูู Windows
   
2. **ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
   ```bash
   # ุงูุชุญ MySQL Command Line
   mysql -u root -p
   
   # ุฃูุดุฆ ูุงุนุฏุฉ ุงูุจูุงูุงุช
   CREATE DATABASE waiting_system;
   
   # ุงุฎุฑุฌ
   exit;
   ```

   **ุฃู ุงุณุชุฎุฏู phpMyAdmin:**
   - ุงูุชุญ http://localhost/phpmyadmin
   - ุงููุฑ ุนูู "New" ูุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ
   - ุงูุชุจ ุงุณู `waiting_system`
   - ุงุถุบุท Create

#### ุฅุฐุง ุงุฎุชุฑุช SQLite:
ูุง ุชุญุชุงุฌ ุฃู ุดูุก! ุณูุชู ุฅูุดุงุก ุงูููู ุชููุงุฆูุงู.

---

### ุงูุฎุทูุฉ 3: ุชุทุจูู ุงููุงูุฌุฑูุดู

ุจุนุฏ ุฅูุดุงุก ููู `.env` ูุชุดุบูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

```bash
# ุชุทุจูู ุงููุงูุฌุฑูุดู
npx prisma migrate deploy

# ุฃู ุฅุฐุง ูู ููุฌุญุ ุงุณุชุฎุฏู:
npx prisma db push
```

---

### ุงูุฎุทูุฉ 4: ููุก ุงูุจูุงูุงุช ุงูุฃูููุฉ

```bash
npx ts-node prisma/seed.ts
```

ูุฌุจ ุฃู ุชุฑู:
```
๐งน ุฌุงุฑู ุชูุธูู ูุงุนุฏุฉ ุงูุจูุงูุงุช...
โ ุชู ุชูุธูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
๐ ุฌุงุฑู ุฅูุดุงุก ุงููุญุทุงุช...
โ ุชู ุฅูุดุงุก ุงููุญุทุงุช ุจูุฌุงุญ
โ๏ธ ุฌุงุฑู ุฅูุดุงุก ุฅุนุฏุงุฏุงุช ุงููุธุงู...
โ ุชู ุฅุถุงูุฉ ุงูุจูุงูุงุช ุงูุฃูููุฉ ุจูุฌุงุญ

๐ ุงููุญุทุงุช ุงูููุดุฃุฉ:
   1. ุงูุงุณุชูุจุงู - ุดุงุดุฉ ุฑูู 1
   2. ุงููุญุงุณุจุฉ - ุดุงุดุฉ ุฑูู 2
   3. ุงููุฎุจุฑ - ุดุงุดุฉ ุฑูู 3
   4. ุงูุฏูุชูุฑ - ุดุงุดุฉ ุฑูู 4
```

---

### ุงูุฎุทูุฉ 5: ุชุดุบูู ุงูุณูุฑูุฑ

```bash
npm run dev
```

ูุฌุจ ุฃู ุชุฑู:
```
๐ Server is running on http://localhost:3003
๐ก WebSocket server is ready
```

---

### ุงูุฎุทูุฉ 6: ุชุดุบูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

ูู ูุงูุฐุฉ terminal ุฌุฏูุฏุฉ:

```bash
cd web
npm run dev
```

---

## ๐ง ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ - Troubleshooting

### ุฎุทุฃ: Can't reach database server

**ุงูุณุจุจ:** ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ูุดุบูุฉ

**ุงูุญู:**
- ุชุฃูุฏ ูู ุชุดุบูู MySQL (XAMPP ุฃู MySQL Service)
- ุฃู ุงุณุชุฎุฏู SQLite ุจุฏูุงู ูู MySQL (ุงูุธุฑ ุงูุฎูุงุฑ 2 ุฃุนูุงู)

---

### ุฎุทุฃ: Table doesn't exist

**ุงูุณุจุจ:** ูู ูุชู ุชุทุจูู ุงููุงูุฌุฑูุดู

**ุงูุญู:**
```bash
npx prisma migrate deploy
# ุฃู
npx prisma db push
```

---

### ุฎุทุฃ: LAST_QUEUE_NUMBER not found

**ุงูุณุจุจ:** ูู ูุชู ููุก ุงูุจูุงูุงุช ุงูุฃูููุฉ

**ุงูุญู:**
```bash
npx ts-node prisma/seed.ts
```

---

### ุฎุทุฃ: 500 Internal Server Error ูู ุงููุงุฌูุฉ

**ุงูุณุจุจ:** ุฃุญุฏ ุงูุฃุณุจุงุจ ุงูุชุงููุฉ:
1. ุงูุณูุฑูุฑ ุบูุฑ ูุดุบู
2. ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ูุชุตูุฉ
3. ุงูุจูุงูุงุช ุงูุฃูููุฉ ุบูุฑ ููุฌูุฏุฉ

**ุงูุญู:**
ุชุฃูุฏ ูู ุฅุชูุงู ุฌููุน ุงูุฎุทูุงุช ูู 1 ุฅูู 5 ุฃุนูุงู

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ููู `.env` ูุฌุจ ุฃู ูููู ูู ุงููุฌูุฏ ุงูุฑุฆูุณู** (ููุณ ูุณุชูู `package.json`)

2. **ูุง ุชุดุงุฑู ููู `.env`** - ูุฐุง ุงูููู ูุญุชูู ุนูู ูุนูููุงุช ุญุณุงุณุฉ

3. **ููุชุทููุฑ ุงูุณุฑูุน:** ุงุณุชุฎุฏู SQLite - ูุง ูุญุชุงุฌ ุฃู ุฅุนุฏุงุฏ

4. **ููุฅูุชุงุฌ:** ุงุณุชุฎุฏู MySQL ุฃู PostgreSQL

---

## ๐ฏ ุงูุชุญูู ูู ูุฌุงุญ ุงูุฅุนุฏุงุฏ

ุจุนุฏ ุฅุชูุงู ุฌููุน ุงูุฎุทูุงุช:

1. ุงูุชุญ http://localhost:3003
   - ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ JSON ุจูุฌุงุญ

2. ุงูุชุญ http://localhost:5173 (ุงููุงุฌูุฉ)
   - ูุฌุจ ุฃูุง ุชุฑู ุฃุฎุทุงุก ูู Console
   - ูุฌุจ ุฃู ุชุนูู ุงูุตูุญุงุช ุจุฏูู ุฃุฎุทุงุก 500

3. ุฌุฑุจ ุฅุถุงูุฉ ูุฑูุถ ุฌุฏูุฏ ูู ุตูุญุฉ ุงูุงุณุชูุจุงู
   - ูุฌุจ ุฃู ููุดุฃ ุงูุฏูุฑ ุจูุฌุงุญ
   - ูุฌุจ ุฃู ูุธูุฑ ุฑูู ุงูุฏูุฑ ุงูุฌุฏูุฏ

---

## ๐ ุงุญุชุฌุช ูุณุงุนุฏุฉ ุฅุถุงููุฉุ

ุฅุฐุง ุงุณุชูุฑุช ุงููุดุงูู:

1. ุชุญูู ูู ููู `.env` ููุฌูุฏ ูููุชูุจ ุจุดูู ุตุญูุญ
2. ุชุญูู ูู ุชุดุบูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุดุบู ุงูุฃูุงูุฑ ุจุงูุชุฑุชูุจ ุงูุตุญูุญ
4. ุชุญูู ูู console ุงูุณูุฑูุฑ ูุฑุคูุฉ ุงูุฃุฎุทุงุก ุงูุชูุตูููุฉ

