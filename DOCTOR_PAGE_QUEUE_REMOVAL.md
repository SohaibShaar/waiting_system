# ุฅุฒุงูุฉ ุงููุฑุงุฌุน ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุนูุฏ ุงูุญูุธ ุงูููุงุฆู ูู ุตูุญุฉ ุงูุทุจูุจุฉ

## ๐ ุงููุตู

ุชู ุชุญุฏูุซ ุงููุธุงู ุจุญูุซ ุนูุฏ ุงูุญูุธ ุงูููุงุฆู ูู ุตูุญุฉ ุงูุทุจูุจุฉ (`DoctorPage`)ุ ูุชู ุญุฐู ุงููุฑุงุฌุน ุชููุงุฆูุงู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุงูุฌุงูุจูุฉ (`QueueSidebar`).

## ๐ง ุงูุชุบููุฑุงุช ุงููููุฐุฉ

### 1. Backend - ุฅุฑุณุงู ุญุฏุซ WebSocket ุนูุฏ ุฅููุงู ุงูุฏูุฑ

**ุงูููู:** `src/controllers/station.controller.ts`

- ุชู ุฅุถุงูุฉ ุงุณุชูุฑุงุฏ `emitQueueCompleted` ูู ุงููุญุฏุฉ ุงูุฑุฆูุณูุฉ
- ุนูุฏ ุฅููุงู ุงูุฏูุฑ ููุงุฆูุงู (ุนูุฏูุง ุชููู ุงูุทุจูุจุฉ ูู ุงููุญุทุฉ ุงูุฃุฎูุฑุฉ)ุ ูุชู ุฅุฑุณุงู ุญุฏุซ `queue-completed` ุนุจุฑ WebSocket
- ูุฐุง ุงูุญุฏุซ ููุนูู ุฌููุน ุงูุตูุญุงุช ุงููุชุตูุฉ ุจุฃู ุงูุฏูุฑ ูุฏ ุงูุชูู ููุฌุจ ุฅุฒุงูุชู ูู ุงูููุงุฆู

```typescript
// ุฅุฑุณุงู ุญุฏุซ queue-completed ูุฅุฒุงูุฉ ุงูุฏูุฑ ูู ุงูููุงุฆู ุงูุฌุงูุจูุฉ
emitQueueCompleted({
  queueId,
  stationId,
  completedAt: new Date().toISOString(),
});
```

### 2. Frontend - ุชุญุฏูุซ ุฑุณุงูุฉ ุงููุฌุงุญ

**ุงูููู:** `web/src/pages/DoctorPage.tsx`

- ุชู ุชุญุฏูุซ ุฏุงูุฉ `handleSave` ูุชูุถูุญ ุฃู ุงูุฏูุฑ ุชู ุฅุฒุงูุชู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ
- ุชู ุฅุถุงูุฉ `console.log` ูุชุชุจุน ุงุณุชุฌุงุจุฉ Backend
- ุชู ุชุญุฏูุซ ุฑุณุงูุฉ ุงููุฌุงุญ ูุชุชุถูู ูุนูููุฉ ุนู ุฅุฒุงูุฉ ุงููุฑุงุฌุน ูู ุงููุงุฆูุฉ

```typescript
alert("โ ุชู ุญูุธ ุงูุจูุงูุงุช ุงูุทุจูุฉ ุงูููุงุฆูุฉ ุจูุฌุงุญ!\n\n๐ ุชู ุฅุฒุงูุฉ ุงููุฑุงุฌุน ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ");
```

## ๐ ููููุฉ ุนูู ุงููุธุงู

### ุงููุณุงุฑ ุงููุงูู ููุญูุธ ุงูููุงุฆู:

1. **ุงููุณุชุฎุฏู ูุถุบุท ุนูู "ุญูุธ ููุงุฆู" ูู ุตูุญุฉ ุงูุทุจูุจุฉ**
   
2. **ูุชู ุฅุฑุณุงู ุงูุจูุงูุงุช ุงูุทุจูุฉ:**
   ```
   POST /api/doctor
   ```

3. **ูุชู ุฅููุงุก ุงูุฎุฏูุฉ ูู ุงููุญุทุฉ:**
   ```
   POST /api/stations/:stationId/complete-service
   ```

4. **Backend ูุชุญูู ูู ูุฌูุฏ ูุญุทุงุช ุฃุฎุฑู:**
   - ุฅุฐุง ูุงูุช ููุงู ูุญุทุฉ ุชุงููุฉ โ ูููู ุงูุฏูุฑ ุฅูููุง
   - ุฅุฐุง ูู ุชูู ููุงู ูุญุทุฉ ุชุงููุฉ (ุญุงูุฉ ุงูุทุจูุจุฉ) โ ููููู ุงูุฏูุฑ ููุงุฆูุงู

5. **ุนูุฏ ุฅููุงู ุงูุฏูุฑ ููุงุฆูุงู:**
   - ูุชู ุชุบููุฑ ุญุงูุฉ ุงูุฏูุฑ ูู `ACTIVE` ุฅูู `COMPLETED` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ูุชู ุฅุฑุณุงู ุญุฏุซ `queue-completed` ุนุจุฑ WebSocket
   - ูุชู ุญูุธ ุงูุฏูุฑ ูู ุฃุฑุดูู ุงูุฒูุงุฑุงุช ุงูููุชููุฉ

6. **QueueSidebar ูุชููู ุงูุชุญุฏูุซ:**
   - ุนุจุฑ `useQueueUpdates` hookุ ูุชู ุงูุงุณุชูุงุน ูุญุฏุซ `queue-completed`
   - ูุชู ุชุญุฏูุซ `updateTrigger` ููุง ูุคุฏู ูุฅุนุงุฏุฉ ุฌูุจ ุงููุงุฆูุฉ
   - ุนูุฏ ุฌูุจ ุงููุงุฆูุฉุ ูุชู ููุชุฑุฉ ุงูุฃุฏูุงุฑ ุงููุดุทุฉ ููุท (`status: ACTIVE`)
   - ุงูุฏูุฑ ุงูููุชูู ูู ูุธูุฑ ูู ุงููุงุฆูุฉ ูุฃูู ุฃุตุจุญ `COMPLETED`

## ๐ก WebSocket Events

### ุงูุฃุญุฏุงุซ ุงููุณุชุฎุฏูุฉ:

- **`queue-updated`**: ุชุญุฏูุซ ุนุงู ููุฏูุฑ
- **`queue-completed`**: ุฅููุงู ุงูุฏูุฑ ููุงุฆูุงู (ุชู ุฅุถุงูุชู)
- **`station-updated`**: ุชุญุฏูุซ ุญุงูุฉ ุงููุญุทุฉ
- **`screen-data-updated`**: ุชุญุฏูุซ ุจูุงูุงุช ุดุงุดุฉ ุงูุนุฑุถ

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

- ุนูุฏ ุงูุญูุธ ุงูููุงุฆู ูู ุตูุญุฉ ุงูุทุจูุจุฉุ ูุฎุชูู ุงููุฑุงุฌุน **ุชููุงุฆูุงู** ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุงูุฌุงูุจูุฉ
- ูุง ูุญุชุงุฌ ุงููุณุชุฎุฏู ูุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
- ูุชู ุชุญุฏูุซ ุฌููุน ุงูุตูุญุงุช ุงููุชุตูุฉ ูู ููุณ ุงูููุช (Real-time)
- ูุชู ุญูุธ ุงูุฏูุฑ ูู ุงูุฃุฑุดูู ุจุดูู ุตุญูุญ

## ๐ ุงูุชุญูู ูู ุนูู ุงูุชุญุฏูุซ

ููููู ุงูุชุญูู ูู ุนูู ุงููุธุงู ุนุจุฑ:

1. ูุชุญ ุตูุญุฉ ุงูุทุจูุจุฉ
2. ูุชุญ Console ูู ุงููุชุตูุญ (F12)
3. ุงุฎุชูุงุฑ ูุฑุงุฌุน ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
4. ููุก ุงูุจูุงูุงุช ูุงูุถุบุท ุนูู "ุญูุธ ููุงุฆู"
5. ูุฑุงูุจุฉ ุงูู Consoleุ ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงุฆู:
   ```
   โ ุชู ุฅููุงุก ุงูุฎุฏูุฉ: { success: true, completed: true, ... }
   โ ุงูุชูุงู ุงูุฏูุฑ: { queueId: ..., stationId: ..., completedAt: ... }
   ```
6. ูุฌุจ ุฃู ูุฎุชูู ุงููุฑุงุฌุน ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ูุจุงุดุฑุฉ

## ๐ ููุงุญุธุงุช

- ูุฐุง ุงูุชุญุฏูุซ ูุนูู ููุท ูููุญุทุฉ ุงูุฃุฎูุฑุฉ (ุงูุทุจูุจุฉ - ุงููุญุทุฉ 5)
- ุงููุญุทุงุช ุงูุฃุฎุฑู ุชููู ุงูุฏูุฑ ูููุญุทุฉ ุงูุชุงููุฉ ุจุฏูุงู ูู ุฅููุงูู
- ูุนุชูุฏ ุงููุธุงู ุนูู WebSocketุ ูุฐุง ุชุฃูุฏ ูู ุฃู WebSocket ูุนูู ุจุดูู ุตุญูุญ
- ุฅุฐุง ูุงู WebSocket ูุง ูุนููุ ุณุชุญุชุงุฌ ูุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ูุฏููุงู ูุฑุคูุฉ ุงูุชุญุฏูุซ

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

ุฅุฐุง ูู ูุฎุชู ุงููุฑุงุฌุน ูู ุงููุงุฆูุฉ:

1. ุชุญูู ูู Console ูู ุงููุชุตูุญ ููุจุญุซ ุนู ุฃุฎุทุงุก
2. ุชุฃูุฏ ูู ุฃู WebSocket ูุชุตู (ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ "โ WebSocket ูุชุตู")
3. ุชุญูู ูู Backend logs ููุชุฃูุฏ ูู ุฅุฑุณุงู ุงูุฃุญุฏุงุซ
4. ุฌุฑุจ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ููุชุฃูุฏ ูู ุฃู ุงูุฏูุฑ ุชู ุฅููุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** 2025-10-20  
**ุงูุฅุตุฏุงุฑ:** 1.0.0

