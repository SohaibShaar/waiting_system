# ๐ง ุญู ูุดููุฉ ุงูุฃุฎุทุงุก 500 - Fix 500 Internal Server Errors

## ๐ ููุฎุต ุงููุดููุฉ - Problem Summary

ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุชุธูุฑ ุฃุฎุทุงุก 500 ุนูุฏ ูุญุงููุฉ ุงูุงุชุตุงู ุจุงูุณูุฑูุฑ:

```
Failed to load resource: the server responded with a status of 500 (Internal Server Error)
```

### ุงูุฃุณุจุงุจ ุงูุฑุฆูุณูุฉ:
1. โ **ููู `.env` ุบูุฑ ููุฌูุฏ** - ูุง ููุฌุฏ ุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
2. โ **ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ูุดุบูุฉ** - MySQL ุบูุฑ ูุดุท
3. โ **ุงูุจูุงูุงุช ุงูุฃูููุฉ ุบูุฑ ููุฌูุฏุฉ** - ุงูุฌุฏุงูู ูุงุฑุบุฉ ุฃู ุบูุฑ ููุฌูุฏุฉ
4. โ **ุชุฑุชูุจ ุงููุญุทุงุช ุฎุงุทุฆ** - ุงููุญุทุฉ ุงูุฃููู ูุฌุจ ุฃู ุชููู "ุงูุงุณุชูุจุงู"

---

## โ ุงูุญู ุงููุงูู - Complete Solution

### ุงููุฑุญูุฉ 1: ุฅูุดุงุก ููู `.env` ๐

ุฃูุดุฆ ููู ุฌุฏูุฏ ุจุงุณู `.env` ูู ุงููุฌูุฏ ุงูุฑุฆูุณู ูููุดุฑูุน:

**ุงูุทุฑููุฉ ุงูุฃุณูู (SQLite - ุจุฏูู MySQL):**
```env
DATABASE_URL="file:./dev.db"
PORT=3003
NODE_ENV=development
```

**ุฅุฐุง ููุช ุชุฑูุฏ ุงุณุชุฎุฏุงู MySQL:**
```env
DATABASE_URL="mysql://root:@localhost:3306/waiting_system"
PORT=3003
NODE_ENV=development
```

> ๐ก **ูุตูุญุฉ:** ุงุณุชุฎุฏู SQLite ููุชุทููุฑ ุงูุณุฑูุน - ูุง ูุญุชุงุฌ ุชุซุจูุช ุฃู ุฅุนุฏุงุฏ!

---

### ุงููุฑุญูุฉ 2: ุชุนุฏูู Prisma ูู SQLite (ุงุฎุชูุงุฑู) ๐

**โ๏ธ ููุท ุฅุฐุง ุงุฎุชุฑุช SQLite ูู ุงููุฑุญูุฉ 1**

ุงูุชุญ `prisma/schema.prisma` ูุบููุฑ ุงูุณุทูุฑ 12-15:

**ูู:**
```prisma
datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}
```

**ุฅูู:**
```prisma
datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}
```

---

### ุงููุฑุญูุฉ 3: ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ๐๏ธ

#### ุฅุฐุง ุงุฎุชุฑุช SQLite:
```bash
# ุชุทุจูู ุงููุงูุฌุฑูุดู
npx prisma db push

# ููุก ุงูุจูุงูุงุช ุงูุฃูููุฉ
npx ts-node prisma/seed.ts
```

#### ุฅุฐุง ุงุฎุชุฑุช MySQL:
```bash
# 1. ุชุฃูุฏ ูู ุชุดุบูู MySQL (XAMPP ุฃู MySQL Service)

# 2. ุฃูุดุฆ ูุงุนุฏุฉ ุงูุจูุงูุงุช
mysql -u root -p
CREATE DATABASE waiting_system;
exit;

# 3. ุชุทุจูู ุงููุงูุฌุฑูุดู
npx prisma db push

# 4. ููุก ุงูุจูุงูุงุช ุงูุฃูููุฉ
npx ts-node prisma/seed.ts
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
๐งน ุฌุงุฑู ุชูุธูู ูุงุนุฏุฉ ุงูุจูุงูุงุช...
โ ุชู ุชูุธูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
๐ ุฌุงุฑู ุฅูุดุงุก ุงููุญุทุงุช...
โ ุชู ุฅูุดุงุก ุงููุญุทุงุช ุจูุฌุงุญ
โ๏ธ ุฌุงุฑู ุฅูุดุงุก ุฅุนุฏุงุฏุงุช ุงููุธุงู...
โ ุชู ุฅุถุงูุฉ ุงูุจูุงูุงุช ุงูุฃูููุฉ ุจูุฌุงุญ

๐ ุงููุญุทุงุช ุงูููุดุฃุฉ:
   1. ุงูุงุณุชูุจุงู - ุดุงุดุฉ ุฑูู 1
   2. ุงููุญุงุณุจุฉ - ุดุงุดุฉ ุฑูู 2
   3. ุงููุฎุจุฑ - ุดุงุดุฉ ุฑูู 3
   4. ุงูุฏูุชูุฑ - ุดุงุดุฉ ุฑูู 4
```

---

### ุงููุฑุญูุฉ 4: ุชุดุบูู ุงููุธุงู ๐

#### Terminal 1 - Backend:
```bash
npm run dev
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
๐ Server is running on http://localhost:3003
๐ก WebSocket server is ready
```

#### Terminal 2 - Frontend:
```bash
cd web
npm run dev
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
  โ  Local:   http://localhost:5173/
```

---

## ๐ฏ ุงูุชุญูู ูู ูุฌุงุญ ุงูุญู

### 1. ุงุฎุชุจุงุฑ Backend API:
ุงูุชุญ ุงููุชุตูุญ ุนูู: http://localhost:3003

**ูุฌุจ ุฃู ุชุฑู:**
```json
{
  "message": "๐ฅ ูุธุงู ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ - Queue Management System",
  "version": "1.0.0",
  "endpoints": {
    "patients": "/api/patients",
    "queue": "/api/queue",
    "stations": "/api/stations",
    ...
  }
}
```

### 2. ุงุฎุชุจุงุฑ Frontend:
ุงูุชุญ: http://localhost:5173

**Console ูุฌุจ ุฃู ูููู ูุธูู ุจุฏูู ุฃุฎุทุงุก 500!**

โ **ุฅุฐุง ุฑุฃูุช:**
```
โ ูุชุตู ุจุงูุฎุงุฏู
```

โ **ุฅุฐุง ุฑุฃูุช:**
```
Failed to load resource: 500
โ ุงููุทุน ุงูุงุชุตุงู
```
โ ุงุฑุฌุน ูููุฑุญูุฉ 1 ูุชุฃูุฏ ูู ุฌููุน ุงูุฎุทูุงุช

### 3. ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ูุฑูุถ:
1. ุงูุชุญ ุตูุญุฉ ุงูุงุณุชูุจุงู: http://localhost:5173 (ุซู ุงุฎุชุฑ Reception)
2. ุงููุฃ ุจูุงูุงุช ุงูุฒูุฌูู
3. ุงุถุบุท "ุญูุธ ูุฅูุดุงุก ุฏูุฑ ุฌุฏูุฏ"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โ ุชู ุฅูุดุงุก ุงูุฏูุฑ #1 ุจูุฌุงุญ!
```

---

## ๐ ุงูุชุบููุฑุงุช ุงูุชู ุชูุช

### โ ุชู ุชุญุฏูุซ `prisma/seed.ts`:
- โ ุฅุถุงูุฉ ูุญุทุฉ "ุงูุงุณุชูุจุงู" ูุฃูู ูุญุทุฉ
- โ ุชุตุญูุญ ุชุฑุชูุจ ุงููุญุทุงุช:
  1. ุงูุงุณุชูุจุงู (ุฑูู ุดุงุดุฉ 1)
  2. ุงููุญุงุณุจุฉ (ุฑูู ุดุงุดุฉ 2)
  3. ุงููุฎุจุฑ (ุฑูู ุดุงุดุฉ 3)
  4. ุงูุฏูุชูุฑ (ุฑูู ุดุงุดุฉ 4)
- โ ุฅุถุงูุฉ ุชูุธูู ุชููุงุฆู ููุจูุงูุงุช ุงููุฏููุฉ
- โ ุฅุถุงูุฉ ุฑุณุงุฆู ุชูุถูุญูุฉ ุฃูุถู

---

## ๐ ูุง ูุฒุงู ูุฏูู ูุดุงููุ

### ุงููุดููุฉ: ุฎุทุฃ "Can't reach database server"
**ุงูุญู:**
- ุฅุฐุง ููุช ุชุณุชุฎุฏู MySQL: ุชุฃูุฏ ูู ุชุดุบููู (XAMPP Control Panel โ Start MySQL)
- ุงูุญู ุงูุฃุณูู: ุงุณุชุฎุฏู SQLite ุจุฏูุงู ูู MySQL (ุงููุฑุญูุฉ 1 ู 2)

### ุงููุดููุฉ: ุฎุทุฃ "Table doesn't exist"
**ุงูุญู:**
```bash
npx prisma db push
```

### ุงููุดููุฉ: ุฎุทุฃ "LAST_QUEUE_NUMBER not found"
**ุงูุญู:**
```bash
npx ts-node prisma/seed.ts
```

### ุงููุดููุฉ: Frontend ูุง ูุฒุงู ูุนุฑุถ 500 errors
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฃู Backend ูุนูู ุนูู port 3003
2. ุชุญูู ูู Console ูู Backend ููุฃุฎุทุงุก
3. ุฌุฑุจ ุฅุนุงุฏุฉ ุชุดุบูู ููุง ุงูุณูุฑูุฑุงุช (Ctrl+C ุซู npm run dev)

---

## ๐ ุงูุฎุทูุงุช ุงูุณุฑูุนุฉ (TL;DR)

```bash
# 1. ุฃูุดุฆ .env (ุงุฎุชุฑ ุฃุญุฏ ุงูุฎูุงุฑูู):
echo 'DATABASE_URL="file:./dev.db"
PORT=3003
NODE_ENV=development' > .env

# 2. ุฅุฐุง ุงุฎุชุฑุช SQLiteุ ุนุฏู prisma/schema.prisma
# ุบููุฑ provider ูู "mysql" ุฅูู "sqlite"

# 3. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
npx prisma db push
npx ts-node prisma/seed.ts

# 4. ุดุบูู Backend
npm run dev

# 5. ูู terminal ุฌุฏูุฏุ ุดุบูู Frontend
cd web
npm run dev
```

**ุงูุขู ุงูุชุญ http://localhost:5173 ููุฌุจ ุฃู ูุนูู ูู ุดูุก! ๐**

---

## โจ ููุงุญุธุฉ ููุงุฆูุฉ

ุชู ุชุตุญูุญ ุงููุดููุฉ ุงูุฃุณุงุณูุฉ ููู ุฃู ูุธุงู ุงูุงุณุชูุจุงู ูุชููุน ูุญุทุฉ "ุงูุงุณุชูุจุงู" ูุฃูู ูุญุทุฉ ูู ุงููุธุงู. ุงูุขู ุงูุจูุงูุงุช ุงูุฃูููุฉ (seed data) ุชูุดุฆ ุงููุญุทุงุช ุจุงูุชุฑุชูุจ ุงูุตุญูุญ.

ููุท ุชุฃูุฏ ูู:
1. โ ูุฌูุฏ ููู `.env`
2. โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุตูุฉ ูุชุนูู
3. โ ุชู ุชุดุบูู `seed.ts` ุจูุฌุงุญ
4. โ Backend ู Frontend ูุนููุงู ูุนุงู

**ุจุงูุชูููู! ๐**

