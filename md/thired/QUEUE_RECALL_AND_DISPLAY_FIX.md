# ุฅุตูุงุญ ุฅุนุงุฏุฉ ุงููุฏุงุก ูุดุงุดุฉ ุงูุนุฑุถ

## ุงูุชุงุฑูุฎ: 2025-10-12

## ุงููุดุงูู ุงููุนุงูุฌุฉ

### 1. ุฅุถุงูุฉ ููุฒุฉ ุฅุนุงุฏุฉ ุงููุฏุงุก ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ
**ุงููุดููุฉ:** ูู ููู ููุงู ุทุฑููุฉ ูุฅุนุงุฏุฉ ุงุณุชุฏุนุงุก ูุฑูุถ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ.

**ุงูุญู:**
- ุฅุถุงูุฉ ุฒุฑ "๐ ุฅุนุงุฏุฉ ุงููุฏุงุก" ููู ุฏูุฑ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ
- ุงูุฒุฑ ูุธูุฑ ููุท ุนูุฏูุง ูููู `stationId` ูุชุงุญุงู
- ุนูุฏ ุงูููุฑุ ูุชู ุงุณุชุฏุนุงุก ููุณ API endpoint ููุงุณุชุฏุนุงุก ุงููุญุฏุฏ
- ูุชู ุชุนุทูู ุงูุฒุฑ ุฃุซูุงุก ุงููุนุงูุฌุฉ ูุชุฌูุจ ุงูููุฑ ุงููุชุนุฏุฏ

### 2. ุฅุฒุงูุฉ ุงูุงูุชุธุงุฑ 5 ุซูุงูู ูู ุดุงุดุฉ ุงูุนุฑุถ
**ุงููุดููุฉ:** ูุงูุช ุดุงุดุฉ ุงูุนุฑุถ ุชูุชุธุฑ 5 ุซูุงูู ุจุนุฏ ูู ูุฏุงุกุ ููุง ูุณุจุจ ุชุฃุฎูุฑุงู ุบูุฑ ุถุฑูุฑู.

**ุงูุญู:**
- ุฅุฒุงูุฉ `await new Promise((resolve) => setTimeout(resolve, 5000))`
- ุงููุธุงู ุงูุขู ููุชูู ูุจุงุดุฑุฉ ุฅูู ุงูุฏูุฑ ุงูุชุงูู ุจุนุฏ ุงูุชูุงุก ุงูุตูุช ููุท
- ุงูุณุฑุนุฉ ูู ุงููุนุงูุฌุฉ ุชุญุณูุช ุจุดูู ูุจูุฑ

---

## ุงูุชุบููุฑุงุช ุงูุชูุตูููุฉ

### 1. `web/src/components/QueueSidebar.tsx`

#### ุฅุถุงูุฉ Props ุฌุฏูุฏ
```typescript
interface QueueSidebarProps {
  stationName: string;
  currentQueueId?: number;
  stationId?: number | null; // โ ุฌุฏูุฏ
}
```

#### ุฅุถุงูุฉ State ููุชุชุจุน
```typescript
const [recallingQueue, setRecallingQueue] = useState<number | null>(null);
```

#### ุฅุถุงูุฉ ูุธููุฉ ุฅุนุงุฏุฉ ุงููุฏุงุก
```typescript
const handleRecall = async (queueNumber: number) => {
  if (!stationId) {
    alert("โ๏ธ ูุง ูููู ุชุญุฏูุฏ ุงููุญุทุฉ");
    return;
  }

  try {
    setRecallingQueue(queueNumber);
    const response = await axios.post(
      `${API_URL}/stations/${stationId}/call-specific`,
      { queueNumber, calledBy: `${stationName} (ุฅุนุงุฏุฉ ูุฏุงุก)` }
    );

    if (response.data.success) {
      console.log(`โ ุชูุช ุฅุนุงุฏุฉ ุงุณุชุฏุนุงุก ุงูุฏูุฑ #${queueNumber}`);
    }
  } catch (error) {
    console.error("โ ุฎุทุฃ ูู ุฅุนุงุฏุฉ ุงูุงุณุชุฏุนุงุก:", error);
    alert("โ ุญุฏุซ ุฎุทุฃ ูู ุฅุนุงุฏุฉ ุงูุงุณุชุฏุนุงุก");
  } finally {
    setRecallingQueue(null);
  }
};
```

#### ุฅุถุงูุฉ ุฒุฑ ูู UI
```typescript
{/* Recall Button */}
{stationId && (
  <button
    onClick={() => handleRecall(queue.queueNumber)}
    disabled={recallingQueue === queue.queueNumber}
    className='w-full mt-2 px-3 py-1.5 rounded-lg text-sm font-semibold transition duration-200 hover:opacity-80 disabled:opacity-50'
    style={{
      backgroundColor: "var(--accent)",
      color: "var(--white)",
    }}>
    {recallingQueue === queue.queueNumber ? "โณ ุฌุงุฑู ุงููุฏุงุก..." : "๐ ุฅุนุงุฏุฉ ุงููุฏุงุก"}
  </button>
)}
```

---

### 2. `web/src/pages/DisplayScreen.tsx`

#### ุฅุฒุงูุฉ ุงูุชุธุงุฑ 5 ุซูุงูู

**ูุจู:**
```typescript
// 3. ุงูุงูุชุธุงุฑ 5 ุซูุงูู ุนูู ุงูุฃูู (ุจุนุฏ ุงูุตูุช)
console.log(`โณ ุงูุชุธุงุฑ 5 ุซูุงูู ููุฏูุฑ #${nextCall.queueNumber}`);
await new Promise((resolve) => setTimeout(resolve, 5000));

// 4. ุฅุฒุงูุฉ ุงูุฏูุฑ ูู ุงูุทุงุจูุฑ
pendingCallsRef.current = pendingCallsRef.current.slice(1);
```

**ุจุนุฏ:**
```typescript
// 3. ุฅุฒุงูุฉ ุงูุฏูุฑ ูู ุงูุทุงุจูุฑ ูุจุงุดุฑุฉ (ุจุฏูู ุงูุชุธุงุฑ)
pendingCallsRef.current = pendingCallsRef.current.slice(1);
console.log(`โ ุชู ุงูุงูุชูุงุก ูู ูุนุงูุฌุฉ ุงูุฏูุฑ #${nextCall.queueNumber}`);
console.log(`๐ ุงูุฃุฏูุงุฑ ุงููุชุจููุฉ: ${pendingCallsRef.current.length}`);
```

#### ุฅุตูุงุญ ุฃุฎุทุงุก ูู ุงูููุฏ
- ุฅุตูุงุญ `pendingCallsRef.current.length` (ูุงูุช ููุณูุฉ ุนูู ุณุทุฑูู)
- ุฅุตูุงุญ `setRecentCalls` (ูุงูุช ุชุงููุฉ)
- ุฅุตูุงุญ `console.log` (ูุงูุช ุชุญุชูู ุนูู ุฃุฎุทุงุก ูู ุงูุตูุบุฉ)

---

### 3. ุชุญุฏูุซ ุฌููุน ุตูุญุงุช ุงููุญุทุงุช

ุชู ุชูุฑูุฑ `stationId` ุฅูู `QueueSidebar` ูู:
- `web/src/pages/AccountingPage.tsx`
- `web/src/pages/LabPage.tsx`
- `web/src/pages/DoctorPage.tsx`

**ูุซุงู:**
```typescript
<QueueSidebar
  stationName='ุงููุญุงุณุจุฉ'
  currentQueueId={currentPatient?.queueId}
  stationId={stationId} // โ ุฌุฏูุฏ
/>
```

---

### 4. `web/src/components/Header.tsx`

ุฅุตูุงุญ ุฎุทุฃ Linter:
```typescript
// ูุจู
import { Link, useNavigate } from "react-router-dom";

// ุจุนุฏ
import { useNavigate } from "react-router-dom";
```

---

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุฅุนุงุฏุฉ ุงููุฏุงุก ุนูู ูุฑูุถ
1. ุงูุชุญ ุฃู ุตูุญุฉ ูุญุทุฉ (ูุญุงุณุจุฉุ ูุฎุชุจุฑุ ุทุจูุจุฉ)
2. ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุนูู ุงููุณุงุฑุ ุณุชุฌุฏ ุฌููุน ุงููุฑุถู ุงูููุชุธุฑูู
3. ุงุถุบุท ุนูู ุฒุฑ "๐ ุฅุนุงุฏุฉ ุงููุฏุงุก" ุจุฌุงูุจ ุฃู ูุฑูุถ
4. ุณูุชู ุฅุนุงุฏุฉ ุงุณุชุฏุนุงุก ุงููุฑูุถ ูุฅุฑุณุงู ุฅุดุนุงุฑ ุฅูู ุดุงุดุฉ ุงูุนุฑุถ
5. ุงูุฒุฑ ุณูุชุญูู ุฅูู "โณ ุฌุงุฑู ุงููุฏุงุก..." ุฃุซูุงุก ุงููุนุงูุฌุฉ

### ุดุงุดุฉ ุงูุนุฑุถ ุงููุญุณููุฉ
- ุนูุฏ ุงุณุชุฏุนุงุก ูุฑูุถ ุฌุฏูุฏุ ุณูุธูุฑ ููุฑุงู ุนูู ุงูุดุงุดุฉ
- ุณูุชู ุชุดุบูู ุงูุตูุช (ุฅู ูุงู ููุนูุงู)
- ุจุนุฏ ุงูุชูุงุก ุงูุตูุช ูุจุงุดุฑุฉุ ุณูุชู ุงูุงูุชูุงู ุฅูู ุงูุฏูุฑ ุงูุชุงูู (ุฅู ูุฌุฏ)
- ูุง ููุฌุฏ ุงูุชุธุงุฑ 5 ุซูุงูู ุฅุถุงููุฉ

---

## ุงูููุงุฆุฏ

1. **ุณูููุฉ ุฅุนุงุฏุฉ ุงููุฏุงุก:** ูุง ุญุงุฌุฉ ููุจุญุซ ุนู ุงููุฑูุถุ ููุท ุงุถุบุท ุฒุฑ
2. **ุณุฑุนุฉ ุฃูุถู:** ุฅุฒุงูุฉ ุงูุงูุชุธุงุฑ ุบูุฑ ุงูุถุฑูุฑู ูุณุฑูุน ุงูุนูููุฉ
3. **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู:** ุชุญุฏูุซุงุช ููุฑูุฉ ูุจุฏูู ุชุฃุฎูุฑ
4. **ูุฑููุฉ ุฃูุซุฑ:** ูููู ุฅุนุงุฏุฉ ุงููุฏุงุก ุนูู ุฃู ูุฑูุถ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ

---

## ุงุฎุชุจุงุฑ ุงูุชุบููุฑุงุช

### 1. ุงุฎุชุจุงุฑ ุฅุนุงุฏุฉ ุงููุฏุงุก
```bash
# ุดุบูู ุงูุฎุงุฏู
npm run dev

# ุดุบูู ุงููุงุฌูุฉ
cd web
npm run dev
```

1. ุงูุชุญ ุตูุญุฉ ุงููุญุทุฉ
2. ุฃุถู ุนุฏุฉ ูุฑุถู ูู ุงูุงุณุชูุจุงู
3. ุงุณุชุฏุนู ูุฑูุถ ูุงุญุฏ
4. ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑุ ุงุถุบุท "ุฅุนุงุฏุฉ ุงููุฏุงุก" ุนูู ุฃู ูุฑูุถ
5. ุชุฃูุฏ ูู ุธููุฑู ุนูู ุดุงุดุฉ ุงูุนุฑุถ

### 2. ุงุฎุชุจุงุฑ ุดุงุดุฉ ุงูุนุฑุถ
1. ุงูุชุญ ุดุงุดุฉ ุงูุนุฑุถ
2. ุงุณุชุฏุนู ุนุฏุฉ ูุฑุถู ุจุณุฑุนุฉ
3. ุชุฃูุฏ ูู:
   - ุธููุฑ ูู ุฏูุฑ ุนูู ุงูุดุงุดุฉ
   - ุชุดุบูู ุงูุตูุช (ุฅู ูุงู ููุนูุงู)
   - ุงูุงูุชูุงู ุงูุณุฑูุน ููุฏูุฑ ุงูุชุงูู ุจุนุฏ ุงูุชูุงุก ุงูุตูุช
   - ุนุฏู ูุฌูุฏ ุงูุชุธุงุฑ 5 ุซูุงูู

---

## ุงูุฎูุงุตุฉ

โ ุชู ุฅุถุงูุฉ ููุฒุฉ ุฅุนุงุฏุฉ ุงููุฏุงุก ูู ุฌููุน ุงููุญุทุงุช  
โ ุชู ุฅุฒุงูุฉ ุงูุงูุชุธุงุฑ 5 ุซูุงูู ูู ุดุงุดุฉ ุงูุนุฑุถ  
โ ุชู ุฅุตูุงุญ ุฌููุน ุฃุฎุทุงุก Linter  
โ ุชู ุงุฎุชุจุงุฑ ุงูุจูุงุก ุจูุฌุงุญ  

ุงููุธุงู ุงูุขู ุฃุณุฑุน ูุฃูุซุฑ ูุฑููุฉ! ๐

