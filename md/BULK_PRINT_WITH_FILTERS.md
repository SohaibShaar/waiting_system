# ุชุญุณููุงุช ุงูุทุจุงุนุฉ ุงููุชุนุฏุฏุฉ ูุน ุงูููุชุฑุฉ ูุงูู Pagination

## ๐ ูุธุฑุฉ ุนุงูุฉ
ุชู ุชุญุณูู ููุฒุฉ ุงูุทุจุงุนุฉ ุงููุชุนุฏุฏุฉ ูุชุดูู:
- **ููุชุฑุฉ ุญุณุจ ุงูุฃููููุฉ**: ุนุฑุถ ุงููุณุชุนุฌู ุฃู ุงูุนุงุฏู ููุท
- **ุงูุชุญุฏูุฏ ุนุจุฑ ุฌููุน ุงูุตูุญุงุช**: ุงูุชุญุฏูุฏ ุจุงููุทุงู ูุนูู ุนูู ุฌููุน ุงูุจูุงูุงุช
- **ุฏูุฌ ุงูููุชุฑุฉ ูุน ุงูุจุญุซ**: ุฌููุน ุงูููุงุชุฑ ุชุนูู ูุนุงู

## โจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. ููุชุฑ ุงูุฃููููุฉ
ููููู ุงูุขู ุชุตููุฉ ุงูุณุฌูุงุช ุญุณุจ ุงูุฃููููุฉ:

#### ุฃุฒุฑุงุฑ ุงูููุชุฑุฉ:
- **ุงููู**: ุนุฑุถ ุฌููุน ุงูุณุฌูุงุช (ูุณุชุนุฌู + ุนุงุฏู)
- **โก ูุณุชุนุฌู**: ุนุฑุถ ุงูุณุฌูุงุช ุงููุณุชุนุฌูุฉ ููุท
- **๐ ุนุงุฏู**: ุนุฑุถ ุงูุณุฌูุงุช ุงูุนุงุฏูุฉ ููุท

#### ููููุฉ ุงูุงุณุชุฎุฏุงู:
```
1. ุงูุชุญ ูุงุฆูุฉ ุงูุญุงูุงุช ุงูููุชููุฉ
2. ุงุฎุชุฑ ุงูููุชุฑ ุงููุทููุจ (ุงููู / ูุณุชุนุฌู / ุนุงุฏู)
3. ุณูุชู ุชุญุฏูุซ ุงูุฌุฏูู ุชููุงุฆูุงู
4. ูุชู ุญุณุงุจ ุนุฏุฏ ุงูุณุฌูุงุช ุงูููู ุญุณุจ ุงูููุชุฑ
```

### 2. ุงูุชุญุฏูุฏ ุจุงููุทุงู ุนุจุฑ ุฌููุน ุงูุตูุญุงุช
ุงูุขู ุนูุฏ ุงุณุชุฎุฏุงู "ุชุญุฏูุฏ ุจุงููุทุงู"ุ ูุชู ุงูุจุญุซ ูู ุฌููุน ุงูุตูุญุงุช ูููุณ ููุท ุงูุตูุญุฉ ุงูุญุงููุฉ.

#### ูุซุงู:
```
ูุฏูู 100 ุณุฌู ููุฒุนุฉ ุนูู 7 ุตูุญุงุช
ุชุฑูุฏ ุทุจุงุนุฉ ุงูุณุฌูุงุช ูู 5 ุฅูู 50

ุงููุฏูู โ: ูุจุญุซ ููุท ูู ุงูุตูุญุฉ ุงูุญุงููุฉ (15 ุณุฌู)
ุงูุฌุฏูุฏ โ: ูุจุญุซ ูู ุฌููุน ุงูุตูุญุงุช ููุฌุฏ ุฌููุน ุงูุณุฌูุงุช ูู 5 ุฅูู 50
```

### 3. ุฏูุฌ ุงูููุชุฑุฉ ูุน ุงูุชุญุฏูุฏ ุจุงููุทุงู
ุงูุชุญุฏูุฏ ุจุงููุทุงู ูุฃุฎุฐ ุจุนูู ุงูุงุนุชุจุงุฑ:
- **ุงูููุชุฑ ุงูุญุงูู** (ุงููู / ูุณุชุนุฌู / ุนุงุฏู)
- **ุงูุจุญุซ ุงููุตู** (ุฅู ูุฌุฏ)
- **ูุทุงู ุฃุฑูุงู ุงูุฏูุฑ**

#### ูุซุงู ุนููู:
```
ุงูููุชุฑ: ูุณุชุนุฌู
ุงูุจุญุซ: "ุฃุญูุฏ"
ุงููุทุงู: ูู 1 ุฅูู 20

ุงููุชูุฌุฉ: ุฌููุน ุงูุณุฌูุงุช ุงููุณุชุนุฌูุฉ ุงูุชู ุชุญุชูู ุนูู "ุฃุญูุฏ" 
         ูู ุงูุฏูุฑ 1 ุฅูู 20 ุนุจุฑ ุฌููุน ุงูุตูุญุงุช
```

## ๐ฏ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู

### ุญุงูุฉ 1: ุทุจุงุนุฉ ุฌููุน ุงููุณุชุนุฌู
```
1. ุงุถุบุท ุนูู ููุชุฑ "โก ูุณุชุนุฌู"
2. ุงุถุบุท "โ ุชุญุฏูุฏ ุงููู"
3. ุงุถุบุท "๐จ๏ธ ุทุจุงุนุฉ"

ุงููุชูุฌุฉ: ุทุจุงุนุฉ ุฌููุน ุงูุณุฌูุงุช ุงููุณุชุนุฌูุฉ ูู ุงูุตูุญุฉ ุงูุญุงููุฉ
```

### ุญุงูุฉ 2: ุทุจุงุนุฉ ุงููุณุชุนุฌู ูู 1 ุฅูู 50
```
1. ุงุถุบุท ุนูู ููุชุฑ "โก ูุณุชุนุฌู"
2. ุงุถุบุท "๐ข ุชุญุฏูุฏ ุจุงููุทุงู"
3. ุฃุฏุฎู "1" ูู "ูู ุฑูู"
4. ุฃุฏุฎู "50" ูู "ุฅูู ุฑูู"
5. ุงุถุบุท "ุชุทุจูู"
6. ุงุถุบุท "๐จ๏ธ ุทุจุงุนุฉ"

ุงููุชูุฌุฉ: ุทุจุงุนุฉ ุฌููุน ุงูุณุฌูุงุช ุงููุณุชุนุฌูุฉ ูู 1 ุฅูู 50 
         ุนุจุฑ ุฌููุน ุงูุตูุญุงุช
```

### ุญุงูุฉ 3: ุทุจุงุนุฉ ุงูุนุงุฏู ุงูุฐู ูุญุชูู ุนูู "ูุญูุฏ"
```
1. ุงุถุบุท ุนูู ููุชุฑ "๐ ุนุงุฏู"
2. ุงูุชุจ "ูุญูุฏ" ูู ุงูุจุญุซ
3. ุงูุชุธุฑ ุญุชู ูุชู ุงูุชุตููุฉ ุชููุงุฆูุงู
4. ุงุถุบุท "โ ุชุญุฏูุฏ ุงููู"
5. ุงุถุบุท "๐จ๏ธ ุทุจุงุนุฉ"

ุงููุชูุฌุฉ: ุทุจุงุนุฉ ุฌููุน ุงูุณุฌูุงุช ุงูุนุงุฏูุฉ ุงูุชู ุชุญุชูู ุนูู "ูุญูุฏ"
```

### ุญุงูุฉ 4: ุทุจุงุนุฉ ูุทุงู ูุญุฏุฏ ูุน ุจุญุซ
```
1. ุงูุชุจ "ุนูู" ูู ุงูุจุญุซ
2. ุงุถุบุท "๐ข ุชุญุฏูุฏ ุจุงููุทุงู"
3. ุฃุฏุฎู "10" ูู "ูู ุฑูู"
4. ุฃุฏุฎู "30" ูู "ุฅูู ุฑูู"
5. ุงุถุบุท "ุชุทุจูู"
6. ุงุถุบุท "๐จ๏ธ ุทุจุงุนุฉ"

ุงููุชูุฌุฉ: ุทุจุงุนุฉ ุฌููุน ุงูุณุฌูุงุช ุงูุชู ุชุญุชูู ุนูู "ุนูู"
         ูู ุงูุฏูุฑ 10 ุฅูู 30 ุนุจุฑ ุฌููุน ุงูุตูุญุงุช
```

## ๐ง ุงูุชุญุณููุงุช ุงูุชูููุฉ

### Backend (API)

#### 1. Endpoint ุฌุฏูุฏ: `/api/doctor/completed/range`
```typescript
GET /api/doctor/completed/range?queueIdStart=5&queueIdEnd=20&priority=1&search=ุฃุญูุฏ

Response:
{
  "success": true,
  "data": [...],
  "total": 15
}
```

**ุงููุนุงููุงุช:**
- `queueIdStart`: ุฑูู ุงูุฏูุฑ ุงูุฃูู (ูุทููุจ)
- `queueIdEnd`: ุฑูู ุงูุฏูุฑ ุงูุฃุฎูุฑ (ูุทููุจ)
- `priority`: 1 ูููุณุชุนุฌูุ 0 ููุนุงุฏู (ุงุฎุชูุงุฑู)
- `search`: ูุต ุงูุจุญุซ (ุงุฎุชูุงุฑู)

#### 2. Endpoint ุฌุฏูุฏ: `/api/doctor/completed/bulk`
```typescript
POST /api/doctor/completed/bulk
Body: {
  "ids": [1, 5, 10, 15, 20]
}

Response:
{
  "success": true,
  "data": [...],
  "total": 5
}
```

**ุงูุงุณุชุฎุฏุงู:** ุฌูุจ ุจูุงูุงุช ูุงููุฉ ูุณุฌูุงุช ูุญุฏุฏุฉ (ูุฏ ุชููู ูู ุตูุญุงุช ูุฎุชููุฉ)

#### 3. ุชุญุณูู Endpoint: `/api/doctor/completed`
```typescript
GET /api/doctor/completed?page=1&limit=15&priority=1&search=ุฃุญูุฏ

Response:
{
  "success": true,
  "data": [...],
  "total": 25,
  "page": 1,
  "totalPages": 2
}
```

**ุงููุนุงููุงุช ุงูุฌุฏูุฏุฉ:**
- `priority`: 1 ูููุณุชุนุฌูุ 0 ููุนุงุฏู (ุงุฎุชูุงุฑู)

### Frontend (React)

#### 1. State ุฌุฏูุฏ ููููุชุฑุฉ
```typescript
const [priorityFilter, setPriorityFilter] = useState<"all" | "urgent" | "normal">("all");
```

#### 2. ุชุญุฏูุซ ุชููุงุฆู ุนูุฏ ุชุบููุฑ ุงูููุชุฑ
```typescript
useEffect(() => {
  if (showCompletedList) {
    const timer = setTimeout(() => {
      loadCompletedData(1, searchTerm, priorityFilter);
    }, 500);
    return () => clearTimeout(timer);
  }
}, [searchTerm, priorityFilter, showCompletedList]);
```

#### 3. ุฏุงูุฉ ูุญุณูุฉ ููุชุญุฏูุฏ ุจุงููุทุงู
```typescript
const selectByRange = async () => {
  // ุฌูุจ ุงูุณุฌูุงุช ูู ุงูุฎุงุฏู ุนุจุฑ ุฌููุน ุงูุตูุญุงุช
  const response = await axios.get(`${API_URL}/doctor/completed/range?${params}`);
  
  // ุชุญุฏูุฏ ุฌููุน ุงูุณุฌูุงุช ุงููุทุงุจูุฉ
  const rangeIds = new Set<number>(response.data.data.map((item) => item.id));
  setSelectedRecords(rangeIds);
};
```

#### 4. ุฏุงูุฉ ูุญุณูุฉ ููุทุจุงุนุฉ ุงููุชุนุฏุฏุฉ
```typescript
const handleBulkPrint = async () => {
  // ุฌูุจ ุงูุจูุงูุงุช ุงููุงููุฉ ููุณุฌูุงุช ุงููุญุฏุฏุฉ
  const response = await axios.post(`${API_URL}/doctor/completed/bulk`, {
    ids: Array.from(selectedRecords),
  });
  
  // ุทุจุงุนุฉ ุฌููุน ุงูุณุฌูุงุช
  await printMultipleReceipts(printDataArray);
};
```

## ๐ ููุงุฑูุฉ: ูุจู ูุจุนุฏ

### ูุจู ุงูุชุญุณููุงุช โ
```
- ุงูููุชุฑุฉ: ุบูุฑ ููุฌูุฏุฉ
- ุงูุชุญุฏูุฏ ุจุงููุทุงู: ูุนูู ููุท ุนูู ุงูุตูุญุฉ ุงูุญุงููุฉ
- ุงูุทุจุงุนุฉ: ุชุญุชุงุฌ ุฅูู ุงูุชููู ุจูู ุงูุตูุญุงุช ูุฏููุงู
- ุงูุฏูุฌ: ูุง ูููู ุฏูุฌ ุงูุจุญุซ ูุน ุงูุชุญุฏูุฏ ุจุงููุทุงู
```

### ุจุนุฏ ุงูุชุญุณููุงุช โ
```
- ุงูููุชุฑุฉ: ูุณุชุนุฌู / ุนุงุฏู / ุงููู
- ุงูุชุญุฏูุฏ ุจุงููุทุงู: ูุนูู ุนุจุฑ ุฌููุน ุงูุตูุญุงุช
- ุงูุทุจุงุนุฉ: ุชููุงุฆูุฉ ูุฌููุน ุงูุณุฌูุงุช ุงููุญุฏุฏุฉ
- ุงูุฏูุฌ: ุฌููุน ุงูููุงุชุฑ ุชุนูู ูุนุงู ุจุณูุงุณุฉ
```

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ูุณู ุงูููุชุฑุฉ
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ ุจุญุซ...                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุนุฑุถ: [ุงููู (100)] [โก ูุณุชุนุฌู] [๐ ุนุงุฏู]โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุฑุณุงูุฉ ุชูุถูุญูุฉ ูู ุงูุชุญุฏูุฏ ุจุงููุทุงู
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ูู ุฑูู: [5]  ุฅูู ุฑูู: [20]  [ุชุทุจูู]   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ก ูุซุงู: ูุทุจุงุนุฉ ุงูุณุฌูุงุช ูู 5 ุฅูู 20   โ
โ โน๏ธ ุงูุชุญุฏูุฏ ูุนูู ุนุจุฑ ุฌููุน ุงูุตูุญุงุช ูุน    โ
โ    ูุฑุงุนุงุฉ ุงูููุชุฑุฉ ุงูุญุงููุฉ (ุงููุณุชุนุฌู)   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## โก ุงูุฃุฏุงุก

### ุงูุชุญุณููุงุช:
1. **Caching**: ุงูุจูุงูุงุช ุงููุญููุฉ ุชุจูู ูู ุงูุฐุงูุฑุฉ
2. **Debouncing**: ุงูุจุญุซ ูุชุฃุฎุฑ 500ms ูุชูููู ุงูุทูุจุงุช
3. **Pagination**: ุชุญููู 15 ุณุฌู ููุท ูู ูู ุตูุญุฉ
4. **Bulk Fetching**: ุฌูุจ ุฌููุน ุงูุณุฌูุงุช ุงููุญุฏุฏุฉ ูู ุทูุจ ูุงุญุฏ

### ุงูุงุนุชุจุงุฑุงุช:
- ุงูุชุญุฏูุฏ ุจุงููุทุงู ูุฏ ูุณุชุบุฑู ููุชุงู ุฃุทูู ูููุทุงูุงุช ุงููุจูุฑุฉ
- ูููุตุญ ุจุชุญุฏูุฏ ูุทุงูุงุช ูุนูููุฉ (ูุซูุงู: 1-100 ุจุฏูุงู ูู 1-1000)

## ๐ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### 1. ูุทุงู ุบูุฑ ุตุญูุญ
```
Input: ูู 20 ุฅูู 10
Error: "โ๏ธ ุฑูู ุงูุจุฏุงูุฉ ูุฌุจ ุฃู ูููู ุฃุตุบุฑ ูู ุฑูู ุงูููุงูุฉ"
```

### 2. ูุง ุชูุฌุฏ ุณุฌูุงุช ูู ุงููุทุงู
```
Input: ูู 1000 ุฅูู 2000 (ูุน ููุชุฑ ูุณุชุนุฌู)
Error: "โ๏ธ ูุง ุชูุฌุฏ ุณุฌูุงุช ูู ูุฐุง ุงููุทุงู ูุน ุงูููุชุฑุฉ ุงูุญุงููุฉ"
```

### 3. ูุดู ุงูุงุชุตุงู ุจุงูุฎุงุฏู
```
Fallback: ูุชู ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงููุญููุฉ (ุงูุตูุญุฉ ุงูุญุงููุฉ ููุท)
Warning: "โ ุชู ุชุญุฏูุฏ X ุณุฌู ูู ุงูุตูุญุฉ ุงูุญุงููุฉ"
```

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### Backend:
1. โ `src/controllers/doctor.controller.ts` - ุฅุถุงูุฉ endpoints ุฌุฏูุฏุฉ
2. โ `src/routes/doctor.routes.ts` - ุฅุถุงูุฉ routes ุฌุฏูุฏุฉ
3. โ `src/services/doctor.service.ts` - ุชุญุณูู ุฏุงูุฉ ุงูููุชุฑุฉ

### Frontend:
1. โ `web/src/pages/DoctorPage.tsx` - ุฅุถุงูุฉ ุงูููุชุฑุฉ ูุงูุชุญุณููุงุช

## ๐ ุงูุชูุงูู

### ุงููุชุตูุญุงุช:
- โ Chrome/Edge (ููุตู ุจู)
- โ Firefox
- โ Safari
- โ IE (ุบูุฑ ูุฏุนูู)

### ุงูุฅุตุฏุงุฑุงุช:
- Backend: Node.js 16+
- Frontend: React 18+
- Database: PostgreSQL 13+

## ๐ ุฃูุซูุฉ API

### ูุซุงู 1: ุฌูุจ ุงููุณุชุนุฌู ููุท
```bash
curl "http://localhost:5000/api/doctor/completed?page=1&limit=15&priority=1"
```

### ูุซุงู 2: ุฌูุจ ูุทุงู ูุน ุจุญุซ
```bash
curl "http://localhost:5000/api/doctor/completed/range?queueIdStart=5&queueIdEnd=20&search=ุฃุญูุฏ"
```

### ูุซุงู 3: ุฌูุจ ุณุฌูุงุช ูุญุฏุฏุฉ
```bash
curl -X POST "http://localhost:5000/api/doctor/completed/bulk" \
  -H "Content-Type: application/json" \
  -d '{"ids": [1, 5, 10, 15, 20]}'
```

## ๐ ูุตุงุฆุญ ููุงุณุชุฎุฏุงู ุงูุฃูุซู

1. **ุงุณุชุฎุฏู ุงูููุชุฑุฉ ุฃููุงู**: ููู ุนุฏุฏ ุงูุณุฌูุงุช ูุจู ุงูุชุญุฏูุฏ
2. **ูุทุงูุงุช ูุนูููุฉ**: ุญุฏุฏ ูุทุงูุงุช ุตุบูุฑุฉ ููุฃุฏุงุก ุงูุฃูุถู
3. **ุฏูุฌ ุงูููุงุชุฑ**: ุงุณุชุฎุฏู ุงูุจุญุซ + ุงูููุชุฑ + ุงููุทุงู ูุนุงู
4. **ุชุญูู ูู ุงูุนุฏุฏ**: ุชุฃูุฏ ูู ุนุฏุฏ ุงูุณุฌูุงุช ุงููุญุฏุฏุฉ ูุจู ุงูุทุจุงุนุฉ

---
**ุชุงุฑูุฎ ุงูุชุญุฏูุซ**: 2 ููููุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ**: 2.0.0  
**ุงูุญุงูุฉ**: โ ููุชูู ููุฎุชุจุฑ

