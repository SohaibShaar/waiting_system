# โ ุชูููุฐ ููุฒุฉ ุงูุฃุฑุดูู ูููุญุทุงุช - ููุชูู

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุชูููุฐ ููุฒุฉ ุงูุฃุฑุดูู ุจูุฌุงุญ ูู ุงููุญุทุงุช ุงูุซูุงุซ (ุงููุญุงุณุจุฉุ ุงููุฎุชุจุฑุ ุณุญุจ ุงูุฏู) ูุนุฑุถ ุฌููุน ุงูุณุฌูุงุช ุงููุญููุธุฉ ูุณุจูุงู ูุน ุฅููุงููุฉ ุงูุชุนุฏูู ูุฅุนุงุฏุฉ ุงูุทุจุงุนุฉ.

## ูุง ุชู ุชูููุฐู

### 1. Backend API

#### Services
ุชูุช ุฅุถุงูุฉ ุฏูุงู ุฌูุจ ุฌููุน ุงูุณุฌูุงุช:
- `src/services/accounting.service.ts` โ `getAllAccountingData()`
- `src/services/lab.service.ts` โ `getAllLabData()`
- `src/services/bloodDraw.service.ts` โ `getAllBloodDrawData()`

**ุงููููุฒุงุช:**
- ุฌูุจ ุงูุจูุงูุงุช ูุน ุนูุงูุงุช Patient ู Queue ู ReceptionData
- ุชุฑุชูุจ ูู ุงูุฃุญุฏุซ ููุฃูุฏู (`orderBy: { createdAt: 'desc' }`)

#### Controllers
ุชูุช ุฅุถุงูุฉ Controllers ููุฃุฑุดูู:
- `src/controllers/accounting.controller.ts` โ `getAllAccountingDataController()`
- `src/controllers/lab.controller.ts` โ `getAllLabDataController()`
- `src/controllers/bloodDraw.controller.ts` โ `getAllBloodDrawDataController()`

**ุชุญุณููุงุช ุฅุถุงููุฉ:**
- ุฅุถุงูุฉ WebSocket notifications ุนูุฏ ุชุญุฏูุซ ุงูุณุฌูุงุช ูู Accounting ู Lab
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ
- ุฅุฑุฌุงุน ุนุฏุฏ ุงูุณุฌูุงุช ูุน ุงูุจูุงูุงุช

#### Routes
ุชูุช ุฅุถุงูุฉ routes ุฌุฏูุฏุฉ:
- `GET /api/accounting/all` - ุฌูุจ ุฌููุน ุณุฌูุงุช ุงููุญุงุณุจุฉ
- `GET /api/lab/all` - ุฌูุจ ุฌููุน ุณุฌูุงุช ุงููุฎุชุจุฑ
- `GET /api/blood-draw/all` - ุฌูุจ ุฌููุน ุณุฌูุงุช ุณุญุจ ุงูุฏู

**ููุงุญุธุฉ:** ุชู ูุถุน routes `/all` ูุจู `/:queueId` ูุชุฌูุจ ุชุนุงุฑุถ ุงููุณุงุฑุงุช

### 2. Frontend

#### AccountingPage (`web/src/pages/AccountingPage.tsx`)

**States ุงููุถุงูุฉ:**
- `showArchive` - ููุชุญูู ูู ุนุฑุถ modal ุงูุฃุฑุดูู
- `archiveData` - ูุญูุธ ุณุฌูุงุช ุงูุฃุฑุดูู
- `searchTerm` - ููุต ุงูุจุญุซ
- `isEditMode` - ูุชุญุฏูุฏ ูุถุน ุงูุชุนุฏูู

**ุงูุฏูุงู ุงููุถุงูุฉ:**
- `fetchArchiveData()` - ุฌูุจ ุจูุงูุงุช ุงูุฃุฑุดูู ูู API
- `handleOpenArchive()` - ูุชุญ modal ุงูุฃุฑุดูู
- `handleLoadFromArchive(record)` - ุชุญููู ุณุฌู ููุชุนุฏูู
- `filteredArchive` - ุชุตููุฉ ุงูุณุฌูุงุช ุญุณุจ ุงูุจุญุซ

**UI Components:**
- ุฒุฑ "๐ ุงูุฃุฑุดูู" ุจุฌุงูุจ ุฒุฑ ุงูุงุณุชุฏุนุงุก
- Modal ุจุชุตููู ุงุญุชุฑุงูู ูุญุชูู ุนูู:
  - ุญูู ุจุญุซ
  - ุนุฏุงุฏ ุงูุณุฌูุงุช
  - ุฌุฏูู ุจุงูุฃุนูุฏุฉ: ุฑูู ุงูุฏูุฑุ IDุ ุงูุฎุทูุจุ ุงูุฎุทูุจุฉุ ุงููุจูุบุ ุงูุชุงุฑูุฎุ ุงูุฅุฌุฑุงุกุงุช
  - ุฃุฒุฑุงุฑ "ุชุนุฏูู" ู "ุทุจุงุนุฉ" ููู ุณุฌู

**ุงููููุฒุงุช:**
- ุชุนุฏูู ุงูุณุฌูุงุช ุจุงุณุชุฎุฏุงู PUT request
- ุฅุนุงุฏุฉ ุทุจุงุนุฉ ุงูุฅูุตุงูุงุช
- ุงูุจุญุซ ุจุฑูู ุงูุฏูุฑุ IDุ ุฃู ุงูุฃุณูุงุก

#### CheckDoctorPage/LabPage (`web/src/pages/CheckDoctorPage.tsx`)

**States ุงููุถุงูุฉ:**
- ููุณ states ุงูุฃุฑุดูู ูุน `ArchiveRecord` interface ุฎุงุต ุจุงููุฎุชุจุฑ

**ุงูุฏูุงู ุงููุถุงูุฉ:**
- `fetchArchiveData()` - ุฌูุจ ุณุฌูุงุช ุงููุฎุชุจุฑ
- `handleOpenArchive()` - ูุชุญ modal ุงูุฃุฑุดูู
- `handleLoadFromArchive(record)` - ุชุญููู ุณุฌู ููุชุนุฏูู
- `clearFormData()` - ูุณุญ ุงูุจูุงูุงุช ูุฅุนุงุฏุฉ ุชุนููู isEditMode

**UI Components:**
- ุฒุฑ "๐ ุงูุฃุฑุดูู"
- Modal ูุน ุฌุฏูู ูุนุฑุถ:
  - ุฑูู ุงูุฏูุฑุ IDุ ุงูุฎุทูุจุ ุงูุฎุทูุจุฉุ ุญุงูุฉ ุงูุฒูุฌุ ุญุงูุฉ ุงูุฒูุฌุฉุ ุงูุชุงุฑูุฎ
  - badges ููููุฉ ููุญุงูุฉ ุงูุตุญูุฉ (ุฃุฎุถุฑ = ุณูููุ ุฃุญูุฑ = ุบูุฑ ุณููู)
  - ุฒุฑ "ุชุนุฏูู" ููู ุณุฌู

**ุงููููุฒุงุช:**
- ุชุนุฏูู ุงูุณุฌูุงุช ูุน PUT request
- ุนุฑุถ ุงูุญุงูุงุช ุงูุตุญูุฉ ุจุดูู ูุงุถุญ
- ุงูุจุญุซ ูุงูุชุตููุฉ

#### BloodDrawPage (`web/src/pages/BloodDrawPage.tsx`)

**States ุงููุถุงูุฉ:**
- ููุณ states ุงูุฃุฑุดูู ูุน `ArchiveRecord` interface ุฎุงุต ุจุณุญุจ ุงูุฏู

**ุงูุฏูุงู ุงููุถุงูุฉ:**
- `fetchArchiveData()` - ุฌูุจ ุณุฌูุงุช ุณุญุจ ุงูุฏู
- `handleOpenArchive()` - ูุชุญ modal ุงูุฃุฑุดูู
- `handleLoadFromArchive(record)` - ุชุญููู ุณุฌู ููุนุฑุถ

**UI Components:**
- ุฒุฑ "๐ ุงูุฃุฑุดูู"
- Modal ูุน ุฌุฏูู ูุนุฑุถ:
  - ุฑูู ุงูุฏูุฑุ IDุ ุงูุฎุทูุจุ ุงูุฎุทูุจุฉุ ุฃุฑูุงู ุงูุฃูุงุจูุจุ ุงูุชุงุฑูุฎ
  - ุนุฑุถ ุฃุฑูุงู ุฃูุงุจูุจ ุงูุฒูุฌ ูุงูุฒูุฌุฉ ุจุฃููุงู ูููุฒุฉ
  - ุฒุฑ "ุฅุนุงุฏุฉ ุทุจุงุนุฉ" ูุทุจุงุนุฉ ุงูููุตูุงุช

**ุงููููุฒุงุช:**
- ุฅุนุงุฏุฉ ุทุจุงุนุฉ ููุตูุงุช ุฃูุงุจูุจ ุงูุฏู
- ุนุฑุถ ุฃุฑูุงู ุงูุฃูุงุจูุจ ุจุดูู ูุงุถุญ (M ููุฐูุฑุ F ููุฃูุซู)
- ุงูุจุญุซ ูุงูุชุตููุฉ

## ุงููููุฒุงุช ุงูุนุงูุฉ ูุฌููุน ุงูุตูุญุงุช

### ุงูุจุญุซ ูุงูุชุตููุฉ
- ุงูุจุญุซ ุจุฑูู ุงูุฏูุฑ
- ุงูุจุญุซ ุจุฑูู ID
- ุงูุจุญุซ ุจุงุณู ุงูุฎุทูุจ
- ุงูุจุญุซ ุจุงุณู ุงูุฎุทูุจุฉ
- ุงูุจุญุซ ูุนูู ุจุดูู ููุฑู (real-time)

### ุงูุชุตููู
- Modal ุจุญุฌู ูุจูุฑ (max-w-6xl)
- ุงุฑุชูุงุน ูุญุฏูุฏ (max-h-[90vh]) ูุน scroll
- Sticky header ููุฌุฏูู
- ุชุตููู responsive
- ุฃููุงู ูุชูุงุณูุฉ ูุน ุงููุธุงู
- hover effects ุนูู ุงูุตููู

### ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
- ุนุฑุถ ุนุฏุฏ ุงูุณุฌูุงุช
- ุฑุณุงูุฉ "ูุง ุชูุฌุฏ ุณุฌูุงุช" ุนูุฏ ุนุฏู ูุฌูุฏ ูุชุงุฆุฌ
- Loading states
- Error handling ูุน ุฑุณุงุฆู ูุงุถุญุฉ
- ุฅุบูุงู Modal ุจุงูููุฑ ุฎุงุฑุฌู ุฃู ุนูู ุฒุฑ ุงูุฅุบูุงู

## ุงููููุงุช ุงููุนุฏูุฉ

### Backend (9 ูููุงุช):
1. `src/services/accounting.service.ts`
2. `src/services/lab.service.ts`
3. `src/services/bloodDraw.service.ts`
4. `src/controllers/accounting.controller.ts`
5. `src/controllers/lab.controller.ts`
6. `src/controllers/bloodDraw.controller.ts`
7. `src/routes/accounting.routes.ts`
8. `src/routes/lab.routes.ts`
9. `src/routes/bloodDraw.routes.ts`

### Frontend (3 ูููุงุช):
1. `web/src/pages/AccountingPage.tsx`
2. `web/src/pages/CheckDoctorPage.tsx`
3. `web/src/pages/BloodDrawPage.tsx`

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูู ุตูุญุฉ ุงููุญุงุณุจุฉ:
1. ุงุถุบุท ุนูู ุฒุฑ "๐ ุงูุฃุฑุดูู"
2. ุงุณุชุฎุฏู ุญูู ุงูุจุญุซ ููุจุญุซ ุนู ุณุฌู ูุนูู
3. ุงุถุบุท "ุชุนุฏูู" ูุชุนุฏูู ุณุฌู ููุฌูุฏ
4. ุงุถุบุท "ุทุจุงุนุฉ" ูุฅุนุงุฏุฉ ุทุจุงุนุฉ ุงูุฅูุตุงู

### ูู ุตูุญุฉ ุงููุฎุชุจุฑ:
1. ุงุถุบุท ุนูู ุฒุฑ "๐ ุงูุฃุฑุดูู"
2. ุงุจุญุซ ุนู ุงูุณุฌู ุงููุทููุจ
3. ุงุถุบุท "ุชุนุฏูู" ูุชุนุฏูู ูุชุงุฆุฌ ุงููุญุต

### ูู ุตูุญุฉ ุณุญุจ ุงูุฏู:
1. ุงุถุบุท ุนูู ุฒุฑ "๐ ุงูุฃุฑุดูู"
2. ุงุจุญุซ ุนู ุงูุณุฌู ุงููุทููุจ
3. ุงุถุบุท "ุฅุนุงุฏุฉ ุทุจุงุนุฉ" ูุทุจุงุนุฉ ููุตูุงุช ุงูุฃูุงุจูุจ ูุฑุฉ ุฃุฎุฑู

## ููุงุญุธุงุช ุชูููุฉ

- ูุง ุญุงุฌุฉ ูุชุนุฏูู Database Schema - ุงูุฌุฏุงูู ููุฌูุฏุฉ ุจุงููุนู
- ุงุณุชุฎุฏุงู Prisma `orderBy` ููุชุฑุชูุจ
- ุงุณุชุฎุฏุงู `include` ูุฌูุจ ุงูุจูุงูุงุช ุงููุฑุชุจุทุฉ
- ูู AccountingPage ู LabPage: ุงูุชูุฑูู ุจูู POST ู PUT ุญุณุจ `isEditMode`
- ูู BloodDrawPage: ุงููุฑุงุกุฉ ููุท ูุน ุฅุนุงุฏุฉ ุงูุทุจุงุนุฉ (ูุง ููุฌุฏ ุชุนุฏูู ูุฃุฑูุงู ุงูุฃูุงุจูุจ)
- ุฌููุน ุงูุฃุฎุทุงุก ูุชู ูุนุงูุฌุชูุง ุจุดูู ุตุญูุญ
- ูุง ุชูุฌุฏ ุฃุฎุทุงุก linting

## ุงูุงุฎุชุจุงุฑ

ููุชุฃูุฏ ูู ุฃู ูู ุดูุก ูุนูู:
1. ุดุบู Backend: `npm run dev` ูู ุงููุฌูุฏ ุงูุฑุฆูุณู
2. ุดุบู Frontend: `npm run dev` ูู ูุฌูุฏ web
3. ุงูุชุญ ูู ุตูุญุฉ ูู ุงูุตูุญุงุช ุงูุซูุงุซ
4. ุงุฎุชุจุฑ ูุชุญ ุงูุฃุฑุดูู ูุงูุจุญุซ
5. ุงุฎุชุจุฑ ุงูุชุนุฏูู/ุงูุทุจุงุนุฉ

## ุงูุชุญุฏูุซุงุช ุงูุฃุฎูุฑุฉ

### 19 ุฃูุชูุจุฑ 2025 - ุงูุชุญุฏูุซ 2

#### ุฅุตูุงุญ ูุดููุฉ ุงูุทุจุงุนุฉ ูู ุงููุญุงุณุจุฉ
- **ุงููุดููุฉ**: ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ "ุทุจุงุนุฉ" ูู ุงูุฃุฑุดููุ ูุงู ูุธูุฑ ุฎุทุฃ "ูุง ููุฌุฏ ูุฑุงุฌุน ุญุงูู"
- **ุงูุญู**: ุชู ุชุนุฏูู ุฒุฑ ุงูุทุจุงุนุฉ ููููู ุจุฌูุจ ุงูุจูุงูุงุช ูุทุจุงุนุชูุง ูุจุงุดุฑุฉ ุจุฏูู ุงูุญุงุฌุฉ ูุชุญููููุง ูู `currentPatient`
- **ุงูููู ุงููุนุฏู**: `web/src/pages/AccountingPage.tsx`

#### ุฅุถุงูุฉ Pagination ููุฃุฑุดูู
ุชู ุฅุถุงูุฉ ูุธุงู pagination ุงุญุชุฑุงูู ูุฌููุน ุตูุญุงุช ุงูุฃุฑุดูู:

**ุงููููุฒุงุช:**
- ุนุฑุถ 10 ุณุฌูุงุช ูู ูู ุตูุญุฉ (ูุงุจู ููุชุนุฏูู)
- ุฃุฒุฑุงุฑ: ุงูุฃูููุ ุงูุณุงุจูุฉุ ุงูุชุงููุฉุ ุงูุฃุฎูุฑุฉ
- ุนุฑุถ ุฃุฑูุงู ุงูุตูุญุงุช ูุน "..." ููุตูุญุงุช ุงูุจุนูุฏุฉ
- ุนุฑุถ ูุนูููุงุช: "ุนุฏุฏ ุงูุณุฌูุงุช: X | ุงูุตูุญุฉ Y ูู Z"
- ุนุฑุถ: "ุนุฑุถ 1-10 ูู 50"
- ุฅุนุงุฏุฉ ุชุนููู ุงูุตูุญุฉ ููุตูุญุฉ ุงูุฃููู ุนูุฏ ุงูุจุญุซ
- ุฅุฎูุงุก Pagination ุนูุฏูุง ูููู ููุงู ุตูุญุฉ ูุงุญุฏุฉ ููุท

**ุงูุตูุญุงุช ุงููุญุฏุซุฉ:**
1. `web/src/pages/AccountingPage.tsx`
2. `web/src/pages/CheckDoctorPage.tsx`
3. `web/src/pages/BloodDrawPage.tsx`

**States ุงููุถุงูุฉ:**
- `currentPage` - ุงูุตูุญุฉ ุงูุญุงููุฉ
- `itemsPerPage` - ุนุฏุฏ ุงูุนูุงุตุฑ ูู ูู ุตูุญุฉ (10)

**Logic ุงููุถุงู:**
```typescript
const totalPages = Math.ceil(filteredArchive.length / itemsPerPage);
const indexOfLastItem = currentPage * itemsPerPage;
const indexOfFirstItem = indexOfLastItem - itemsPerPage;
const currentItems = filteredArchive.slice(indexOfFirstItem, indexOfLastItem);
```

**UI Components:**
- ุดุฑูุท ูุนูููุงุช ูุนุฑุถ ุนุฏุฏ ุงูุณุฌูุงุช ููุนูููุงุช ุงูุตูุญุฉ
- ุฃุฒุฑุงุฑ ุงูุชููู (ุงูุฃูููุ ุงูุณุงุจูุฉุ ุงูุชุงููุฉุ ุงูุฃุฎูุฑุฉ)
- ุฃุฑูุงู ุงูุตูุญุงุช ุงููุงุจูุฉ ููููุฑ
- ุชูููุฒ ุงูุตูุญุฉ ุงูุญุงููุฉ ุจููู ุฃุฒุฑู

## ุงูุชุงุฑูุฎ
ุชู ุงูุชูููุฐ: 19 ุฃูุชูุจุฑ 2025
ุขุฎุฑ ุชุญุฏูุซ: 19 ุฃูุชูุจุฑ 2025 - ุฅุถุงูุฉ Pagination ูุฅุตูุงุญ ุงูุทุจุงุนุฉ

