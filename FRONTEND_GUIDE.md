# 🎨 دليل الواجهات الأمامية

## نظرة عامة
تم إنشاء واجهات أمامية كاملة لجميع محطات النظام باستخدام React + TypeScript + Tailwind CSS.

---

## 📦 التثبيت والتشغيل

### 1. تثبيت الحزم
```bash
cd web
npm install
```

### 2. تشغيل الواجهة الأمامية
```bash
npm run dev
```

الواجهة ستعمل على: **http://localhost:5173**

### 3. تشغيل الخادم الخلفي
```bash
# في terminal منفصل
cd ..
npm run dev
```

الخادم سيعمل على: **http://localhost:3001**

---

## 🖥️ الواجهات المتاحة

### 1. الصفحة الرئيسية
**المسار:** `/`

- عرض جميع الواجهات المتاحة
- روابط سريعة لكل محطة
- معلومات النظام

### 2. الشاشة العامة 📺
**المسار:** `/display`

**الميزات:**
- ✅ عرض مباشر للاستدعاءات
- ✅ إشعارات فورية عند كل استدعاء
- ✅ قائمة بآخر 10 استدعاءات
- ✅ اتصال WebSocket للتحديثات الفورية
- ✅ تنبيه صوتي ومرئي عند الاستدعاء

**الاستخدام:**
- افتح `/display` على شاشة عرض كبيرة
- سيتم عرض رقم الدور والشاشة تلقائياً عند كل استدعاء

### 3. محطة الاستقبال 📝
**المسار:** `/reception`

**الميزات:**
- ✅ نموذج كامل لإدخال بيانات الزوجين
- ✅ إنشاء مريض ودور تلقائياً
- ✅ عرض المرضى المضافين اليوم
- ✅ إمكانية التعديل
- ✅ التحقق من البيانات

**خطوات الاستخدام:**
1. املأ بيانات الزوج (الاسم، تاريخ الميلاد، الرقم الوطني، إلخ)
2. املأ بيانات الزوجة
3. أضف رقم الهاتف والملاحظات (اختياري)
4. اضغط "حفظ وإنشاء دور جديد"
5. سيتم إنشاء مريض ودور تلقائياً وإرساله للشاشة

**الحقول المطلوبة:**
- جميع حقول الزوج والزوجة
- رقم الهاتف: اختياري
- الملاحظات: اختيارية

### 4. محطة المحاسبة 💰
**المسار:** `/accounting`

**الميزات:**
- ✅ نظام استدعاء المريض التالي
- ✅ عرض اسم الزوج والزوجة تلقائياً
- ✅ إدخال المبلغ المدفوع
- ✅ تأكيد الدفع
- ✅ حفظ وإنهاء تلقائياً

**خطوات الاستخدام:**
1. اضغط "استدعاء المريض التالي"
2. ستظهر معلومات المريض (رقم الدور، اسم الزوج، اسم الزوجة)
3. أدخل المبلغ المدفوع
4. ضع علامة ✅ على "تم الدفع"
5. اضغط "حفظ وإنهاء"
6. سيتم حفظ البيانات واستدعاء المريض التالي تلقائياً

### 5. محطة المختبر 🔬
**المسار:** `/lab`

**الميزات:**
- ✅ نظام استدعاء المريض التالي
- ✅ فحص منفصل للزوج والزوجة
- ✅ اختيار سريع: سليم/غير سليم
- ✅ ملاحظات لكل منهما
- ✅ حفظ واستدعاء تلقائي

**خطوات الاستخدام:**
1. اضغط "استدعاء المريض التالي"
2. أدخل اسم الطبيب/الفني (اختياري)
3. حدد حالة الزوج: ✅ سليم أو ❌ غير سليم
4. أضف ملاحظات على الزوج (اختياري)
5. حدد حالة الزوجة: ✅ سليمة أو ❌ غير سليمة
6. أضف ملاحظات على الزوجة (اختياري)
7. أضف ملاحظات عامة (اختياري)
8. اضغط "حفظ واستدعاء التالي"

### 6. محطة الطبيبة 👩‍⚕️
**المسار:** `/doctor`

**الميزات:**
- ✅ نظام استدعاء المريض التالي
- ✅ إدخال فصيلة الدم لكل منهما
- ✅ فحص الأمراض (HIV, HBS, HBC)
- ✅ ملاحظات تفصيلية
- ✅ التقرير النهائي
- ✅ إنهاء الدور الكلي

**خطوات الاستخدام:**
1. اضغط "استدعاء المريض التالي"
2. **بيانات الزوج:**
   - اختر فصيلة الدم
   - حدد نتيجة فحص HIV (سلبي/إيجابي)
   - حدد نتيجة فحص HBS (سلبي/إيجابي)
   - حدد نتيجة فحص HBC (سلبي/إيجابي)
   - أضف ملاحظات
3. **بيانات الزوجة:**
   - نفس الخطوات
4. اكتب التقرير النهائي والتوصيات
5. اضغط "حفظ النهائي وإنهاء الدور"
6. سيتم حفظ جميع البيانات وإنهاء الدور

---

## 🎨 التصميم

### الألوان
- **أزرق:** بيانات الزوج
- **وردي:** بيانات الزوجة
- **أخضر:** حفظ/نجاح
- **أحمر:** إلغاء/خطأ
- **بنفسجي:** الشاشة العامة

### الأيقونات
- 📺 الشاشة العامة
- 📝 الاستقبال
- 💰 المحاسبة
- 🔬 المختبر
- 👩‍⚕️ الطبيبة
- 👨 الزوج
- 👩 الزوجة

---

## 🔌 الاتصال بالخادم

### WebSocket (الشاشة العامة)
```typescript
const socket = io('http://localhost:3001');
socket.emit('subscribe-display');
socket.on('patient-called', (data) => {
  // عرض الاستدعاء
});
```

### REST API (جميع المحطات)
```typescript
const API_URL = 'http://localhost:3001/api';

// مثال: استدعاء المريض التالي
await axios.post(`${API_URL}/stations/${STATION_ID}/call-next`);

// مثال: حفظ البيانات
await axios.post(`${API_URL}/reception`, formData);
```

---

## 📱 التصميم المتجاوب

جميع الواجهات متجاوبة وتعمل على:
- ✅ شاشات الكمبيوتر
- ✅ الأجهزة اللوحية
- ✅ الهواتف المحمولة

---

## 🛠️ التقنيات المستخدمة

### Frontend
- **React 18** - مكتبة الواجهة
- **TypeScript** - للتحقق من الأنواع
- **Tailwind CSS** - للتصميم
- **React Router** - للتنقل بين الصفحات
- **Axios** - لطلبات HTTP
- **Socket.IO Client** - للتحديثات الفورية

### الحزم المثبتة
```json
{
  "react": "^18.2.0",
  "react-dom": "^18.2.0",
  "react-router-dom": "^6.x",
  "axios": "^1.x",
  "socket.io-client": "^4.x",
  "tailwindcss": "^3.x"
}
```

---

## 🔧 التخصيص

### تغيير معرفات المحطات
في كل صفحة، يمكنك تغيير `STATION_ID`:

```typescript
// في AccountingPage.tsx
const STATION_ID = 2; // معرف محطة المحاسبة

// في LabPage.tsx
const STATION_ID = 3; // معرف محطة المختبر

// في DoctorPage.tsx
const STATION_ID = 4; // معرف محطة الطبيب
```

### تغيير الألوان
عدّل ملف `tailwind.config.js`:

```javascript
module.exports = {
  theme: {
    extend: {
      colors: {
        primary: '#...',
        secondary: '#...',
      }
    }
  }
}
```

---

## 📊 سير العمل الكامل

```
1. الاستقبال
   ↓
   [إضافة مريض جديد]
   ↓
   ✅ إنشاء دور تلقائياً
   ↓
   📺 ظهور على الشاشة

2. المحاسبة
   ↓
   [استدعاء التالي]
   ↓
   [تسجيل الدفع]
   ↓
   ✅ حفظ واستدعاء التالي

3. المختبر
   ↓
   [استدعاء التالي]
   ↓
   [فحص السلامة]
   ↓
   ✅ حفظ واستدعاء التالي

4. الطبيبة
   ↓
   [استدعاء التالي]
   ↓
   [الفحص النهائي]
   ↓
   ✅ حفظ وإنهاء الدور
```

---

## ⚠️ ملاحظات مهمة

1. **تشغيل الخادم أولاً:**
   - يجب تشغيل الخادم الخلفي قبل الواجهة الأمامية

2. **WebSocket:**
   - الشاشة العامة تتطلب اتصال WebSocket نشط

3. **المعرفات:**
   - تأكد من صحة معرفات المحطات في قاعدة البيانات

4. **البيانات المطلوبة:**
   - جميع الحقول في الاستقبال مطلوبة
   - باقي المحطات: التحقق من المريض الحالي

5. **الاستدعاء التلقائي:**
   - يحدث فقط في المحطات (المحاسبة، المختبر، الطبيبة)
   - الاستقبال: ينشئ دوراً جديداً مباشرة

---

## 🐛 استكشاف الأخطاء

### المشكلة: لا تظهر البيانات
**الحل:**
- تأكد من تشغيل الخادم الخلفي
- تحقق من `API_URL = 'http://localhost:3001/api'`

### المشكلة: WebSocket لا يعمل
**الحل:**
- تأكد من تشغيل الخادم
- تحقق من الاتصال في console المتصفح

### المشكلة: خطأ في الحفظ
**الحل:**
- تحقق من ملء جميع الحقول المطلوبة
- راجع رسالة الخطأ

---

## 📸 لقطات شاشة

### الصفحة الرئيسية
- شبكة من 6 بطاقات
- تصميم عصري وجذاب

### الشاشة العامة
- عرض كبير لرقم الدور
- قائمة بآخر الاستدعاءات

### محطات العمل
- نموذج واضح وبسيط
- أزرار كبيرة وواضحة
- ألوان مميزة لكل قسم

---

## 🚀 الخطوات التالية

1. ✅ تشغيل النظام
2. ✅ اختبار كل محطة
3. 📊 إضافة إحصائيات
4. 📱 تحسين التجاوب
5. 🔒 إضافة المصادقة
6. 📄 طباعة التقارير

---

## 💡 نصائح

1. **للشاشة العامة:**
   - استخدم شاشة كبيرة
   - وضع ملء الشاشة (F11)

2. **للمحطات:**
   - استخدم اختصارات لوحة المفاتيح
   - Tab للتنقل بين الحقول
   - Enter للحفظ

3. **للأداء:**
   - أغلق التبويبات غير المستخدمة
   - حدّث الصفحة عند البطء

---

**تاريخ الإنشاء:** 2025-10-12  
**الإصدار:** 1.0.0  
**المطور:** نظام إدارة الأدوار

